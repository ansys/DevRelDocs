# Doxygen to Markdown Documentation

This folder contains Markdown files generated by Doxygen (via Seaborg) from XML documentation of the Simulation Framework codebase.

## Overview

The documentation consists of:
- **Classes** - All class definitions and their members
- **Structures** - Data structures and their fields
- **Namespaces** - Namespace hierarchies and organization
- **Files** - Header and source file documentation
- **Directories** - Directory structure documentation
- **Global Definitions** - Global functions, variables, and definitions

## Generated Files

After running Doxygen conversion, this folder contains:
- Individual `.md` files for each class, structure, namespace, file, and directory
- Index files: `*_index.md` - Alphabetical indices
- Content files: `*_contents.md` - Organized lists with descriptions
- `index.md` - Main entry point referencing all index and content files

## Post-Conversion Steps

Once the Doxygen documentation has been converted to Markdown, follow these steps to generate the unified documentation and table of contents:

### 1. Generate Unified Index

Run the master script to create both the unified index and the API table of contents:

```powershell
.\run-all.ps1
```

Or run the scripts individually:

```powershell
# Step 1: Generate unified index from all content files
.\generate-unified-index.ps1

# Step 2: Convert unified index to YAML table of contents
.\convert-to-toc.ps1
```

### 2. Output Files

The scripts will generate:

- **`unified-index.md`** - A single, comprehensive index containing all API references organized by category (Namespaces, Classes, Structures, Files, Directories, Global Definitions)

- **`api-toc.yml`** - A YAML table of contents file ready to be integrated into your main documentation TOC. Uses relative paths with `reference/` prefix.

### 3. Integrate into Main Documentation

To integrate the API reference into your main documentation:

1. Copy or reference `api-toc.yml` in your main `toc.yml` file located at `markdown/toc.yml`

2. Example integration in main `toc.yml`:

```yaml
- name: Introduction
  href: index.md
  
- name: Getting started
  href: getting-started/getting_started.md
  items:
  - name: Installation
    href: getting-started/installation.md
  # ... other getting started items

- name: User guide
  items:
  - name: Customized standalone activity
    href: getting-started/customized_activity.md
  # ... other user guide items

- name: API Reference
  href: reference/unified-index.md
  items:
  - name: Namespaces
    items:
    - name: autonomy
      href: reference/namespaceautonomy.md
    # ... (or include the full api-toc.yml content here)
```

3. Ensure the documentation build system can resolve the `reference/` path to this `sim-framework-md` folder

### 4. Update Path Configuration

If your documentation build system requires different path mapping:

- Modify the `$BaseHrefPath` parameter in `convert-to-toc.ps1`
- Default is `reference/` but can be changed to match your project structure
- Example: Change to `documentation/doxygen/sim-framework-md/` if using absolute paths

```powershell
.\convert-to-toc.ps1 -BaseHrefPath "your/custom/path/"
```

## Scripts Description

### `generate-unified-index.ps1`

**Purpose:** Consolidates all `*_contents.md` files into a single unified index.

**Input:** 
- `namespace_contents.md`
- `class_contents.md`
- `struct_contents.md`
- `file_contents.md`
- `dir_contents.md`
- `global_contents.md`

**Output:** `unified-index.md`

**Features:**
- Extracts all markdown links from content files
- Organizes by category
- Provides statistics on link count and line count

### `convert-to-toc.ps1`

**Purpose:** Converts the unified index from Markdown to YAML TOC format.

**Input:** `unified-index.md`

**Output:** `api-toc.yml`

**Features:**
- Converts Markdown links to YAML format
- Creates hierarchical structure with sections and items
- Adds relative path prefixes (default: `reference/`)
- Proper YAML indentation (2 spaces)
- Cleans up escaped characters in names

**Parameters:**
- `-InputFile` - Path to unified-index.md (default: current directory)
- `-OutputFile` - Path for api-toc.yml (default: current directory)
- `-BaseHrefPath` - Base path prefix for hrefs (default: `reference/`)

### `run-all.ps1`

**Purpose:** Master script that runs both generation scripts in sequence.

**Features:**
- Executes `generate-unified-index.ps1`
- Executes `convert-to-toc.ps1`
- Provides progress feedback
- Error handling and reporting
- Summary of generated files

## Maintenance

### Regenerating Documentation

Whenever the Doxygen documentation is updated:

1. Run Doxygen to generate new XML files
2. Run Seaborg (or your conversion tool) to convert XML to Markdown
3. Run `.\run-all.ps1` to regenerate the unified index and TOC
4. Update your main `toc.yml` if the API structure has significantly changed

### Customization

You can customize the scripts by modifying:

- **Section titles** - Edit the `$sections` array in `generate-unified-index.ps1`
- **Output paths** - Use script parameters to change input/output locations
- **Path prefixes** - Change `$BaseHrefPath` in `convert-to-toc.ps1`
- **YAML formatting** - Modify the `Convert-MarkdownLink` function in `convert-to-toc.ps1`

## Troubleshooting

### Script Execution Policy

If you encounter execution policy errors:

```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### Missing Content Files

If content files are missing, ensure:
- Doxygen has run successfully
- XML to Markdown conversion completed
- All expected `*_contents.md` files exist

### Path Resolution Issues

If documentation links don't resolve:
- Verify the `reference/` path is correctly mapped in your build system
- Check that all `.md` files are in the expected locations
- Adjust `$BaseHrefPath` parameter if using a different structure

## File Structure

```
sim-framework-md/
├── README.md                          # This file
├── index.md                           # Original Doxygen index
├── unified-index.md                   # Generated unified index
├── api-toc.yml                        # Generated YAML TOC
├── generate-unified-index.ps1         # Script to create unified index
├── convert-to-toc.ps1                 # Script to create TOC
├── run-all.ps1                        # Master script
├── *_contents.md                      # Content files (input)
├── *_index.md                         # Index files (input)
├── class*.md                          # Individual class documentation
├── struct*.md                         # Individual structure documentation
├── namespace*.md                      # Individual namespace documentation
├── dir*.md                            # Individual directory documentation
└── *.md                               # Other generated documentation files
```

## Version History

- **v1.0** - Initial script creation (2026-01-28)
  - Created `generate-unified-index.ps1`
  - Created `convert-to-toc.ps1`
  - Created `run-all.ps1`
  - Default base path: `reference/`
  - Proper YAML indentation (2 spaces)

---

For questions or issues with these scripts, contact the documentation team.
