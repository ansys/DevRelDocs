{
  "openapi": "3.1.0",
  "info": {
    "title": "Post Controller",
    "summary": "Service to manage post processing jobs",
    "version": "0.1.0"
  },
  "servers": [
    {
      "url": "/transient-services/exp-0f7f0460-96f8-488d-abe2-8c4b8ab326a0-post-service/BVUEzzdaBmkkPlpxmCJ_MYNULvvh9ie4GLI91N65McF63lMNiLlo_sq_QpvyevRMxuPXhItso98DuLIOCB6lEg"
    }
  ],
  "paths": {
    "/health": {
      "get": {
        "tags": [
          "health"
        ],
        "summary": "Health",
        "description": "Returns healthy message.",
        "operationId": "health-health",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object",
                  "title": "Response Health-Health"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/usage": {
      "get": {
        "tags": [
          "main"
        ],
        "summary": "Get Health",
        "description": "Check health of the service.\n\nAllow client to keep alive the service in auto-shutdown mode.",
        "operationId": "main-get_health",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UsageStats"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/state": {
      "get": {
        "tags": [
          "main"
        ],
        "summary": "Get State",
        "description": "Get state of the job.",
        "operationId": "main-get_state",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StateModel"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/refresh": {
      "post": {
        "tags": [
          "main"
        ],
        "summary": "Refresh",
        "description": "Refresh data from persistent store.",
        "operationId": "main-refresh",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/extensions": {
      "post": {
        "tags": [
          "main"
        ],
        "summary": "Load Extension",
        "description": "Loads an extension and activates it.",
        "operationId": "main-load_extension",
        "parameters": [
          {
            "name": "extension_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Extension Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/simulation-results/iterations": {
      "get": {
        "tags": [
          "simulation-results"
        ],
        "summary": "Get Iterations",
        "description": "Returns list of iterations.",
        "operationId": "simulation-results-get_iterations",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "type": "integer"
                  },
                  "type": "array",
                  "title": "Response Simulation-Results-Get Iterations"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/simulation-results/iterations/{iteration}": {
      "get": {
        "tags": [
          "simulation-results"
        ],
        "summary": "Get Iteration Data",
        "description": "Get results data.",
        "operationId": "simulation-results-get_iteration_data",
        "parameters": [
          {
            "name": "iteration",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Iteration"
            }
          },
          {
            "name": "$top",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "$Top"
            }
          },
          {
            "name": "$filter",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "$Filter"
            }
          },
          {
            "name": "$skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "$Skip"
            }
          },
          {
            "name": "$select",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "*",
              "title": "$Select"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResultsData"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/simulation-results": {
      "get": {
        "tags": [
          "simulation-results"
        ],
        "summary": "Get Data",
        "description": "Get results data.",
        "operationId": "simulation-results-get_data",
        "parameters": [
          {
            "name": "$top",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "$Top"
            }
          },
          {
            "name": "$filter",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "$Filter"
            }
          },
          {
            "name": "$skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "$Skip"
            }
          },
          {
            "name": "$select",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "*",
              "title": "$Select"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResultsData"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/simulation-results/scalar-results": {
      "get": {
        "tags": [
          "simulation-results"
        ],
        "summary": "Get Scalar",
        "description": "Gets all scalar results.",
        "operationId": "simulation-results-get_scalar",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScalarResultsData"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/files:list": {
      "get": {
        "tags": [
          "files"
        ],
        "summary": "Get Files",
        "description": "Get results data.",
        "operationId": "files-get_files",
        "parameters": [
          {
            "name": "path",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "",
              "title": "Path"
            }
          },
          {
            "name": "recursive",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Recursive"
            }
          },
          {
            "name": "filter_regex",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Filter Regex"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "title": "Response Files-Get Files"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/files:download": {
      "get": {
        "tags": [
          "files"
        ],
        "summary": "Get File",
        "description": "Get file.",
        "operationId": "files-get_file",
        "parameters": [
          {
            "name": "path",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Path"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/files/stream/{file_path}": {
      "get": {
        "tags": [
          "files"
        ],
        "summary": "Stream File",
        "description": "Stream the content of the passed file path.\n\n:param file_path: Path of the file to stream.\n:param range_header: Standard HTTP header indicating the part of a resource that the server should return\n:return: StreamingResponse: The response containing the trace file.",
        "operationId": "files-stream_file",
        "parameters": [
          {
            "name": "file_path",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "File Path"
            }
          },
          {
            "name": "range",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Range"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/files/stream-intermediate-file/": {
      "get": {
        "tags": [
          "files"
        ],
        "summary": "Stream Intermediate File",
        "description": "Download an archive containing Job assets and the concrete scenario files for the specified sample list.\n\nThe operation is not supported for all job templates. If the job template doesn't support it,\nan HTTP 400 error is returned.\n\nUsage:\n1. Once you download the zip file, unzip it\n2. Setup any environment variables required for your solver\n3. Run the runme script like `./runme.sh`\n\n:param samples: List of sample ids from all iterations, starting from 1, separated by comma.\n    Leave empty for skipping generation of concrete scenario files.\n:param filter_by_asset_declaration_list: List of asset types to include separated by comma.\n    Leave empty to include all the files.\n:param: include_runme: Includes inputs.json config and runme.sh script files.\n\n:return: StreamingResponse: The response containing archive of intermediate files.",
        "operationId": "files-stream_intermediate_file",
        "parameters": [
          {
            "name": "samples",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Samples"
            },
            "examples": {
              "first": {
                "summary": "Include concrete scenario for 1st sample only",
                "value": "1"
              },
              "multiple": {
                "summary": "Include concrete scenarios for 1st, 2nd and 3rd samples",
                "value": "1,2,3"
              },
              "none": {
                "summary": "No Concrete scenario file is included",
                "value": ""
              }
            }
          },
          {
            "name": "filter_by_asset_declaration_list",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Filter By Asset Declaration List"
            },
            "examples": {
              "ls": {
                "summary": "Only Logical Scenario file is included",
                "value": "[\"scenario\"]"
              },
              "map": {
                "summary": "Only Map type assets are included",
                "value": "[\"map\"]"
              },
              "all": {
                "summary": "All assets are included",
                "value": ""
              }
            }
          },
          {
            "name": "include_runme",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Include Runme"
            },
            "examples": {
              "Yes": {
                "summary": "Include Input config and run script file",
                "value": true
              },
              "No": {
                "summary": "Doesn't include Input config and run script file",
                "value": false
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    }
  },
  "components": {
    "schemas": {
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "IterResultsMetadata": {
        "properties": {
          "parameters": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Parameters",
            "default": []
          },
          "kpis": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Kpis",
            "default": []
          },
          "attributes": {
            "$ref": "#/components/schemas/JsonValue",
            "default": {

            }
          }
        },
        "type": "object",
        "title": "IterResultsMetadata",
        "description": "Raw metadata results data."
      },
      "IterScalarResultsMetadata": {
        "properties": {
          "parameters": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Parameters",
            "default": []
          },
          "kpis": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Kpis",
            "default": []
          },
          "attributes": {
            "$ref": "#/components/schemas/JsonValue",
            "default": {

            }
          },
          "labels": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ]
            },
            "type": "array",
            "title": "Labels",
            "default": []
          },
          "units": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ]
            },
            "type": "array",
            "title": "Units",
            "default": []
          },
          "accuracy": {
            "items": {
              "anyOf": [
                {
                  "type": "number"
                },
                {
                  "type": "null"
                }
              ]
            },
            "type": "array",
            "title": "Accuracy",
            "default": []
          }
        },
        "type": "object",
        "title": "IterScalarResultsMetadata",
        "description": "Raw Scalar metadata results data."
      },
      "JsonValue": {

      },
      "ResultsData": {
        "properties": {
          "columns": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Columns",
            "default": []
          },
          "data": {
            "items": {
              "items": {
                "$ref": "#/components/schemas/JsonValue"
              },
              "type": "array"
            },
            "type": "array",
            "title": "Data",
            "default": []
          },
          "metadata": {
            "$ref": "#/components/schemas/IterResultsMetadata"
          }
        },
        "type": "object",
        "required": [
          "metadata"
        ],
        "title": "ResultsData",
        "description": "Raw results data returned by the Post Controller REST API."
      },
      "SamplesStatusInfo": {
        "properties": {
          "Success": {
            "type": "integer",
            "title": "Success"
          },
          "Failed": {
            "type": "integer",
            "title": "Failed"
          },
          "Pending": {
            "type": "integer",
            "title": "Pending"
          },
          "Scheduled": {
            "type": "integer",
            "title": "Scheduled"
          }
        },
        "type": "object",
        "required": [
          "Success",
          "Failed",
          "Pending",
          "Scheduled"
        ],
        "title": "SamplesStatusInfo",
        "description": "This class contains status info of all samples."
      },
      "ScalarResultsData": {
        "properties": {
          "columns": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Columns",
            "default": []
          },
          "data": {
            "items": {
              "items": {
                "$ref": "#/components/schemas/JsonValue"
              },
              "type": "array"
            },
            "type": "array",
            "title": "Data",
            "default": []
          },
          "metadata": {
            "$ref": "#/components/schemas/IterScalarResultsMetadata"
          }
        },
        "type": "object",
        "required": [
          "metadata"
        ],
        "title": "ScalarResultsData",
        "description": "Raw results data returned by the Post Controller Scalar REST API."
      },
      "StateModel": {
        "properties": {
          "job_id": {
            "type": "string",
            "title": "Job Id"
          },
          "tasks_state": {
            "additionalProperties": {
              "$ref": "#/components/schemas/TaskState"
            },
            "type": "object",
            "title": "Tasks State",
            "default": {

            }
          },
          "start_time": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Start Time"
          },
          "last_update_time": {
            "type": "string",
            "format": "date-time",
            "title": "Last Update Time"
          },
          "completion_time": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completion Time"
          },
          "duration_in_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duration In Seconds"
          },
          "sample_status_info": {
            "additionalProperties": {
              "$ref": "#/components/schemas/SamplesStatusInfo"
            },
            "type": "object",
            "title": "Sample Status Info",
            "default": {

            }
          }
        },
        "type": "object",
        "required": [
          "job_id"
        ],
        "title": "StateModel",
        "description": "This Module is defined to save/restore the state of a Job Run."
      },
      "TaskHistory": {
        "properties": {
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          },
          "status": {
            "$ref": "#/components/schemas/TaskStatus",
            "default": "Pending"
          },
          "comment": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Comment"
          }
        },
        "type": "object",
        "title": "TaskHistory",
        "description": "Holds historical changes in state of class."
      },
      "TaskState": {
        "properties": {
          "task_name": {
            "type": "string",
            "title": "Task Name"
          },
          "start_time": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Start Time"
          },
          "completion_time": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completion Time"
          },
          "duration_in_seconds": {
            "type": "number",
            "title": "Duration In Seconds",
            "default": 0
          },
          "status": {
            "$ref": "#/components/schemas/TaskStatus",
            "default": "Pending"
          },
          "comment": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Comment"
          },
          "history": {
            "items": {
              "$ref": "#/components/schemas/TaskHistory"
            },
            "type": "array",
            "title": "History"
          },
          "attribute": {
            "additionalProperties": {
              "$ref": "#/components/schemas/JsonValue"
            },
            "type": "object",
            "title": "Attribute"
          },
          "sub_states": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/StateModel"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sub States"
          }
        },
        "type": "object",
        "required": [
          "task_name"
        ],
        "title": "TaskState",
        "description": "Holds state of a task."
      },
      "TaskStatus": {
        "type": "string",
        "enum": [
          "Pending",
          "Running",
          "Succeeded",
          "Failed"
        ],
        "title": "TaskStatus",
        "description": "Possible statuses of a task."
      },
      "UsageStats": {
        "properties": {
          "memory": {
            "type": "number",
            "title": "Memory"
          },
          "cpu": {
            "type": "number",
            "title": "Cpu"
          }
        },
        "type": "object",
        "required": [
          "memory",
          "cpu"
        ],
        "title": "UsageStats",
        "description": "Basic usage statistics."
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    }
  }
}