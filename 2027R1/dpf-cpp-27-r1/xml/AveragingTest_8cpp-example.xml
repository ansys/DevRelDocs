<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.16.1" xml:lang="en-US">
  <compounddef id="AveragingTest_8cpp-example" kind="example">
    <compoundname>AveragingTest.cpp</compoundname>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para>Examples showing how to average results to reach a nodal or elemental form, per bodies... <programlisting filename="AveragingTest.cpp"><codeline><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="comment">//<sp/>COPYRIGHT<sp/>ANSYS.<sp/>ALL<sp/>RIGHTS<sp/>RESERVED.</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;dpf_api.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;limits&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXAMPLE</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;Example.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;gtest/gtest.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">TEST(Averaging,<sp/>ResultsRequestedLocation)</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>location<sp/>is<sp/>the<sp/>type<sp/>of<sp/>topology<sp/>associated<sp/>with<sp/>the<sp/>data<sp/>container.<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>For<sp/>finite<sp/>element<sp/>data,<sp/>the<sp/>location<sp/>is<sp/>one<sp/>of<sp/>three<sp/>spatial<sp/>locations:<sp/>Nodal,<sp/>Elemental,<sp/>or<sp/>ElementalNodal.</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>For<sp/>more<sp/>information<sp/>about<sp/>the<sp/>location,<sp/>see<sp/>https://dpf.docs.pyansys.com/version/stable/concepts/concepts.html#location.</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>When<sp/>reading<sp/>a<sp/>result,<sp/>a<sp/>specific<sp/>location<sp/>can<sp/>be<sp/>requested.<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>following<sp/>example<sp/>illustrates<sp/>how<sp/>to<sp/>request<sp/>a<sp/>Nodal<sp/>location<sp/>for<sp/>a<sp/>result<sp/>with<sp/>an<sp/>ElementalNodal<sp/>native<sp/>location.</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Data<sp/>source</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>std::string<sp/>fileName(</highlight><highlight class="stringliteral">&quot;../../../testfiles/mapdl_files/TwoSolids.rst&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1DataSources" kindref="compound">ansys::dpf::DataSources</ref><sp/>dataSources;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>dataSources.<ref refid="classansys_1_1dpf_1_1DataSources_1ad2a5bb6f24ca621ffaaee9e7a47cdc20" kindref="member">addResultFile</ref>(fileName);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref><sp/>stress_op(</highlight><highlight class="stringliteral">&quot;S&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stress_op.empty())<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/>std::runtime_error(</highlight><highlight class="stringliteral">&quot;S<sp/>operator<sp/>failed<sp/>to<sp/>load&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>stress_op.connect(<ref refid="namespaceansys_1_1dpf_1aa4a44a04a0aafb8fe0645f019bbd94d1a5b6613f802062fde4faea4b553db7fbc" kindref="member">ansys::dpf::eDataSourcesPin</ref>,<sp/>dataSources);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1FieldsContainer" kindref="compound">ansys::dpf::FieldsContainer</ref><sp/>result_fc<sp/>=<sp/>stress_op.getOutputFieldsContainer(0);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>EXPECT_EQ(std::string(result_fc.<ref refid="classansys_1_1dpf_1_1FieldsContainer_1addfee935e69fe9fb9e0e533449f9a5bc" kindref="member">at</ref>(0).<ref refid="classansys_1_1dpf_1_1Field_1a860e65caa16f612746ad116429282fd3" kindref="member">fieldDefinition</ref>().<ref refid="classansys_1_1dpf_1_1FieldDefinition_1a9ea61f23ef1eb93c794b7c222d7740b8" kindref="member">location</ref>().<ref refid="structansys_1_1dpf_1_1Location_1ad9fab192124627740ffa623b1a0221ea" kindref="member">c_str</ref>()),<sp/>std::string(<ref refid="structansys_1_1dpf_1_1locations_1a0bda534055805adc4c08bece34989ff3" kindref="member">ansys::dpf::locations::elemental_nodal</ref>));</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>stress_op.connect(<ref refid="namespaceansys_1_1dpf_1aa4a44a04a0aafb8fe0645f019bbd94d1aa8522e00b69f3a2f2626a088f20823fe" kindref="member">ansys::dpf::eLocationPin</ref>,<sp/>std::string(<ref refid="structansys_1_1dpf_1_1locations_1aa4e1967b0838d8597200c606c8564d29" kindref="member">ansys::dpf::locations::nodal</ref>.c_str()));</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>result_fc<sp/>=<sp/>stress_op.getOutputFieldsContainer(0);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>EXPECT_EQ(std::string(result_fc.<ref refid="classansys_1_1dpf_1_1FieldsContainer_1addfee935e69fe9fb9e0e533449f9a5bc" kindref="member">at</ref>(0).<ref refid="classansys_1_1dpf_1_1Field_1a860e65caa16f612746ad116429282fd3" kindref="member">fieldDefinition</ref>().<ref refid="classansys_1_1dpf_1_1FieldDefinition_1a9ea61f23ef1eb93c794b7c222d7740b8" kindref="member">location</ref>().<ref refid="structansys_1_1dpf_1_1Location_1ad9fab192124627740ffa623b1a0221ea" kindref="member">c_str</ref>()),<sp/>std::string(<ref refid="structansys_1_1dpf_1_1locations_1aa4e1967b0838d8597200c606c8564d29" kindref="member">ansys::dpf::locations::nodal</ref>.c_str()));</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>stress_op.connect(<ref refid="namespaceansys_1_1dpf_1aa4a44a04a0aafb8fe0645f019bbd94d1aa8522e00b69f3a2f2626a088f20823fe" kindref="member">ansys::dpf::eLocationPin</ref>,<sp/>std::string(<ref refid="structansys_1_1dpf_1_1locations_1a3f66169a86ab935fb398b3fdde98bb04" kindref="member">ansys::dpf::locations::elemental</ref>.c_str()));</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>result_fc<sp/>=<sp/>stress_op.getOutputFieldsContainer(0);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>EXPECT_EQ(std::string(result_fc.<ref refid="classansys_1_1dpf_1_1FieldsContainer_1addfee935e69fe9fb9e0e533449f9a5bc" kindref="member">at</ref>(0).<ref refid="classansys_1_1dpf_1_1Field_1a860e65caa16f612746ad116429282fd3" kindref="member">fieldDefinition</ref>().<ref refid="classansys_1_1dpf_1_1FieldDefinition_1a9ea61f23ef1eb93c794b7c222d7740b8" kindref="member">location</ref>().<ref refid="structansys_1_1dpf_1_1Location_1ad9fab192124627740ffa623b1a0221ea" kindref="member">c_str</ref>()),<sp/>std::string(<ref refid="structansys_1_1dpf_1_1locations_1a3f66169a86ab935fb398b3fdde98bb04" kindref="member">ansys::dpf::locations::elemental</ref>.c_str()));</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">TEST(Averaging,<sp/>B867395_no_crash_with_empty_element_list)</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1MeshedRegion" kindref="compound">ansys::dpf::MeshedRegion</ref><sp/>m;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>m.<ref refid="classansys_1_1dpf_1_1MeshedRegion_1a2b4891674d74a792b63318c305963500" kindref="member">addNode</ref>(1,<sp/>{<sp/>0.0,0.0,0.0<sp/>});</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>m.<ref refid="classansys_1_1dpf_1_1MeshedRegion_1a2b4891674d74a792b63318c305963500" kindref="member">addNode</ref>(2,<sp/>{<sp/>1.0,0.0,0.0<sp/>});</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>m.<ref refid="classansys_1_1dpf_1_1MeshedRegion_1a2b4891674d74a792b63318c305963500" kindref="member">addNode</ref>(3,<sp/>{<sp/>0.0,1.0,0.0<sp/>});</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Field" kindref="compound">ansys::dpf::Field</ref><sp/>nodal_field;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1FieldDefinition" kindref="compound">ansys::dpf::FieldDefinition</ref><sp/>fdef;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fdef.<ref refid="classansys_1_1dpf_1_1FieldDefinition_1a5ef8fa0b594db3066e6aab50d3b019b6" kindref="member">setLocation</ref>(<ref refid="structansys_1_1dpf_1_1locations_1aa4e1967b0838d8597200c606c8564d29" kindref="member">ansys::dpf::locations::nodal</ref>);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fdef.<ref refid="classansys_1_1dpf_1_1FieldDefinition_1a0d33e4d4faaa30b3808014b19de680cd" kindref="member">dimensions</ref>()<sp/>=<sp/>{<sp/>1<sp/>};</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fdef.<ref refid="classansys_1_1dpf_1_1FieldDefinition_1a8033b1d4486ea3d819ecbb6418bab079" kindref="member">setUnit</ref>(<ref refid="classansys_1_1dpf_1_1Unit" kindref="compound">ansys::dpf::Unit</ref>(</highlight><highlight class="stringliteral">&quot;m&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nodal_field.<ref refid="classansys_1_1dpf_1_1Field_1a471c3f541458acc9c05dfb019a99abb3" kindref="member">setFieldDefinition</ref>(fdef);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nodal_field.<ref refid="classansys_1_1dpf_1_1Field_1a5b717ed309ddf287134905f71ada833b" kindref="member">push_back</ref>(1,<sp/>{<sp/>1.0<sp/>});</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nodal_field.<ref refid="classansys_1_1dpf_1_1Field_1a5b717ed309ddf287134905f71ada833b" kindref="member">push_back</ref>(2,<sp/>{<sp/>2.0<sp/>});</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nodal_field.<ref refid="classansys_1_1dpf_1_1Field_1a5b717ed309ddf287134905f71ada833b" kindref="member">push_back</ref>(3,<sp/>{<sp/>3.0<sp/>});</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nodal_field.<ref refid="classansys_1_1dpf_1_1Field_1ab71f825765a7ce1b37373443917ec23e" kindref="member">setSupport</ref>(m);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref><sp/>averager(</highlight><highlight class="stringliteral">&quot;nodal_to_elemental&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>averager.connect(0,<sp/>nodal_field);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>out<sp/>=<sp/>averager.getOutputField(0);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>EXPECT_EQ(out.dataSize(),<sp/>0);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">TEST(AveragingPerBody,<sp/>Nodal)</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>following<sp/>example<sp/>shows<sp/>you<sp/>how<sp/>to<sp/>average<sp/>a<sp/>result<sp/>per<sp/>body<sp/>for<sp/>a<sp/>multibody<sp/>simulation.<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Data<sp/>source</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>std::string<sp/>fileName(</highlight><highlight class="stringliteral">&quot;../../../testfiles/mapdl_files/TwoSolids.rst&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1DataSources" kindref="compound">ansys::dpf::DataSources</ref><sp/>dataSources;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>dataSources.<ref refid="classansys_1_1dpf_1_1DataSources_1ad2a5bb6f24ca621ffaaee9e7a47cdc20" kindref="member">addResultFile</ref>(fileName);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>scoping<sp/>split<sp/>by<sp/>body</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>-------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Instantiate<sp/>MeshProvider<sp/>operator<sp/>to<sp/>get<sp/>the<sp/>MeshedRegion</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref><sp/>meshProvider<sp/>=<sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref>(</highlight><highlight class="stringliteral">&quot;MeshProvider&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(meshProvider.<ref refid="classansys_1_1dpf_1_1DpfTypes_1a39cd546c42518e2332be8f287db95459" kindref="member">empty</ref>())<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/>std::runtime_error(</highlight><highlight class="stringliteral">&quot;MeshProvider<sp/>failed<sp/>to<sp/>load&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>meshProvider.connect(<ref refid="namespaceansys_1_1dpf_1aa4a44a04a0aafb8fe0645f019bbd94d1a5b6613f802062fde4faea4b553db7fbc" kindref="member">ansys::dpf::eDataSourcesPin</ref>,<sp/>dataSources);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1MeshedRegion" kindref="compound">ansys::dpf::MeshedRegion</ref><sp/>mesh<sp/>=<sp/>meshProvider.<ref refid="classansys_1_1dpf_1_1Operator_1ae67b9230160d80fbca07eb423f180f98" kindref="member">getOutputMeshedRegion</ref>(0);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Instantiate<sp/>the<sp/>scoping::by_property<sp/>operator<sp/>that<sp/>provides<sp/>a<sp/>ScopingsContainer<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>containing<sp/>a<sp/>scoping<sp/>per<sp/>body</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref><sp/>scoping_op<sp/>=<sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref>(</highlight><highlight class="stringliteral">&quot;scoping::by_property&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(scoping_op.<ref refid="classansys_1_1dpf_1_1DpfTypes_1a39cd546c42518e2332be8f287db95459" kindref="member">empty</ref>())<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/>std::runtime_error(</highlight><highlight class="stringliteral">&quot;scoping::by_property<sp/>operator<sp/>failed<sp/>to<sp/>load&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>scoping_op.connect(<ref refid="namespaceansys_1_1dpf_1aa4a44a04a0aafb8fe0645f019bbd94d1a88b6b8d0c02d2ac48fc40e8c02e3da7c" kindref="member">ansys::dpf::eMeshRegionPin</ref>,<sp/>mesh);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>scoping_op.connect(<ref refid="namespaceansys_1_1dpf_1aa4a44a04a0aafb8fe0645f019bbd94d1aa8522e00b69f3a2f2626a088f20823fe" kindref="member">ansys::dpf::eLocationPin</ref>,<sp/><ref refid="structansys_1_1dpf_1_1locations_1a3f66169a86ab935fb398b3fdde98bb04" kindref="member">ansys::dpf::locations::elemental</ref>);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>scoping_op.connect(13,<sp/>std::string(</highlight><highlight class="stringliteral">&quot;mat&quot;</highlight><highlight class="normal">));<sp/></highlight><highlight class="comment">//<sp/>split<sp/>per<sp/>body<sp/>with<sp/>mat<sp/>attribute</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1ScopingsContainer" kindref="compound">ansys::dpf::ScopingsContainer</ref><sp/>scopings_per_body<sp/>=<sp/>scoping_op.<ref refid="classansys_1_1dpf_1_1Operator_1ab8effed66eaf13176c6d68eb3fd2c11f" kindref="member">getOutputScopingsContainer</ref>(0);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>EXPECT_EQ(scopings_per_body.size(),<sp/>4);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>split<sp/>result</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>----------------</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Instantiate<sp/>the<sp/>result<sp/>operator<sp/>(stress)</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref><sp/>stress_op(</highlight><highlight class="stringliteral">&quot;S&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stress_op.empty())<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/>std::runtime_error(</highlight><highlight class="stringliteral">&quot;S<sp/>operator<sp/>failed<sp/>to<sp/>load&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Connect<sp/>the<sp/>DataSources</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>stress_op.connect(<ref refid="namespaceansys_1_1dpf_1aa4a44a04a0aafb8fe0645f019bbd94d1a5b6613f802062fde4faea4b553db7fbc" kindref="member">ansys::dpf::eDataSourcesPin</ref>,<sp/>dataSources);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Request<sp/>a<sp/>location<sp/>for<sp/>the<sp/>output</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Stress<sp/>result<sp/>from<sp/>TwoSolids.rst<sp/>file<sp/>has<sp/>native<sp/>ElementalNodal<sp/>location</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>An<sp/>average<sp/>from<sp/>ElementalNodal<sp/>to<sp/>Nodal<sp/>location<sp/>will<sp/>be<sp/>done</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>stress_op.connect(<ref refid="namespaceansys_1_1dpf_1aa4a44a04a0aafb8fe0645f019bbd94d1aa8522e00b69f3a2f2626a088f20823fe" kindref="member">ansys::dpf::eLocationPin</ref>,<sp/><ref refid="structansys_1_1dpf_1_1locations_1aa4e1967b0838d8597200c606c8564d29" kindref="member">ansys::dpf::locations::nodal</ref>);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Provide<sp/>the<sp/>ScopingsContainer<sp/>(containing<sp/>a<sp/>scoping<sp/>per<sp/>body)<sp/>as<sp/>input<sp/>to<sp/>the<sp/>operator</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>resulting<sp/>FieldsContainer<sp/>will<sp/>contain<sp/>a<sp/>Field<sp/>per<sp/>body</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>stress_op.connect(<ref refid="namespaceansys_1_1dpf_1aa4a44a04a0aafb8fe0645f019bbd94d1a79a70f074b2f79ccaff75ae8e4ec9ec9" kindref="member">ansys::dpf::eMeshScopPin</ref>,<sp/>scopings_per_body);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Compute<sp/>output<sp/>FieldsContainer</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1FieldsContainer" kindref="compound">ansys::dpf::FieldsContainer</ref><sp/>result_fc<sp/>=<sp/>stress_op.getOutputFieldsContainer(0);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>EXPECT_EQ(result_fc.size(),<sp/>4);</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
</programlisting> </para>
    </detaileddescription>
    <location file="dpf_api.h"/>
  </compounddef>
</doxygen>
