<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.16.1" xml:lang="en-US">
  <compounddef id="group__group__06__2" kind="group">
    <compoundname>group_06_2</compoundname>
    <title>Creating a DPF custom operator&apos;s library</title>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para>The Data Processing Framework (DPF) provides numerical simulation users/engineers with a toolbox for accessing and transforming simulation data. It is used to handle complex pre- or post-processing of simulation data within a simulation workflow.</para>
<para>In DPF, <bold>Operators</bold> are the main object used to create, transform and stream the data. An operator is composed of a “core” that handles the calculation. It receives the data using input pins, applies a transformation and makes the data available through the output pins (think of an integrated circuit in electronics). See the <ref refid="group__group__02" kindref="compound">Concepts and Terminology</ref> to learn more.</para>
<para>In Ansys 2022 R2 and later, you can create custom operator&apos;s libraries in C++. It enables to access custom capabilities in any project that is using DPF.</para>
<para>This guide explains how to <bold>create and compile an operator&apos;s library C++ project</bold>, and <bold>how to consume it in another C++ project</bold>.</para>
<sect1 id="group__group__06__2_1autotoc_md45_1s1"><sect2 id="group__group__06__2_1autotoc_md45">
<title>Pre-requisites</title><para>In order to use DPF in a C++ project, it is required to have access to the following files of the **AWP_ROOT@doc_ansys_ver/dpf/include** folder (AWP_ROOT@doc_ansys_ver being an environment variable defining the root of the Ansys Inc or <ulink url="https://dpf.docs.pyansys.com/version/stable/getting_started/dpf_server.html">DPF Server</ulink> product):<itemizedlist>
<listitem><para>dpf_api.h</para>
</listitem><listitem><para>dpf_api_i.cpp</para>
</listitem></itemizedlist>
</para>
<para><bold>DPF_HGP_ROOT environment variable</bold> must be set to define the location of those files and <bold>must be set to follow this tutorial</bold>.</para>
<para>Here is the command for Windows: @win_set_hgp_root</para>
<para>It can also be set by editing the environment variables in Windows settings.</para>
<para>Here is the command for Linux: @lin_set_hgp_root</para>
<para>Moreover it is needed to have compilation tools. Both CMake and Visual Studio are supported for project management and compilation. Examples using both are provided in the following sections.</para>
<para>Create a <bold>DPF_Custom_Operators folder</bold>. The following sections of this tutorial are performed from this folder.</para>
</sect2></sect1>
<sect1 id="group__group__06__2_1autotoc_md46_1s1"><sect2 id="group__group__06__2_1autotoc_md46">
<title>Create a C++ Custom operator&apos;s library</title><para>This section details the C++ code to create a custom basic operator&apos;s library.</para>
<para>In the <bold>DPF_Custom_Operators folder</bold> previously created, create a <bold>MyCustomOperator.h</bold> file with the following content:</para>
<para><programlisting><codeline><highlight class="normal">#pragma<sp/>once</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">#include<sp/>&quot;dpf_api.h&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">#ifndef<sp/>__linux__</highlight></codeline>
<codeline><highlight class="normal">#define<sp/>CLAYER_DLLEXPORT<sp/>__declspec(dllexport)</highlight></codeline>
<codeline><highlight class="normal">#else</highlight></codeline>
<codeline><highlight class="normal">#define<sp/>CLAYER_DLLEXPORT<sp/>__attribute__<sp/>((visibility<sp/>(&quot;default&quot;)))</highlight></codeline>
<codeline><highlight class="normal">#endif</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">namespace<sp/>custom_operators</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/>DPF<sp/>initial<sp/>settings:<sp/>once<sp/>by<sp/>project</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/>-------------------------------------</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>struct<sp/>staticData<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>static<sp/>ansys::dpf::LibraryHandle*<sp/>_dpfLibraryHandle;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>};</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>extern<sp/>&quot;C&quot;<sp/>CLAYER_DLLEXPORT<sp/>int<sp/>LoadOperators(ansys::dpf::AbstractCore*<sp/>core_ptr);</highlight></codeline>
<codeline></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/>my<sp/>custom<sp/>operator<sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/>------------------</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>struct<sp/>CustomMessage</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>identify<sp/>the<sp/>operator</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>static<sp/>std::string<sp/>name()<sp/>{<sp/>return<sp/>&quot;custom_message&quot;;<sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>describe<sp/>the<sp/>operator<sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>static<sp/>ansys::dpf::OperatorSpecification<sp/>specification()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ansys::dpf::OperatorSpecification<sp/>spec;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>spec.setDocumentation(&quot;This<sp/>operator<sp/>displays<sp/>a<sp/>custom<sp/>message<sp/>in<sp/>the<sp/>output<sp/>console.&quot;);</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>spec.setInputPins(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ansys::dpf::PinDefinition(0)<sp/>//<sp/>set<sp/>the<sp/>input<sp/>pin<sp/>number</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.setName(&quot;custom_message&quot;)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.setAcceptedTypes({<sp/>ansys::dpf::types::string})</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.setDoc(&quot;Custom<sp/>message<sp/>to<sp/>display<sp/>in<sp/>the<sp/>output<sp/>console&quot;),</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>});</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>set<sp/>the<sp/>exposed<sp/>properties<sp/>of<sp/>the<sp/>operator,<sp/>allowing<sp/>documentation<sp/>generation<sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>spec.setProperty(ansys::dpf::spec::exposure::sExposure,<sp/>ansys::dpf::spec::exposure::sPublic);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>spec.setProperty(ansys::dpf::spec::category::sCategory,<sp/>&quot;custom&quot;);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>spec.setProperty(ansys::dpf::spec::sUserName,<sp/>&quot;custom<sp/>message&quot;);</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>spec;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>define<sp/>the<sp/>data<sp/>computation</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>static<sp/>void<sp/>run(ansys::dpf::OperatorMain&amp;<sp/>main);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>};</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
</programlisting></para>
<para>The <bold>staticData</bold> structure allows to use the DPF capabilities and must be incorporated only once per project. The <bold>CustomMessage</bold> structure contains all the implementation related to the custom operator. It always contains:<itemizedlist>
<listitem><para>a <bold>name</bold> method (unique identifier)</para>
</listitem><listitem><para>a <bold>specification</bold> method which defines and describes the operator inputs, outputs and data computation</para>
</listitem><listitem><para>a <bold>run</bold> method which contains the data computation code</para>
</listitem></itemizedlist>
</para>
<para>In the <bold>DPF_Custom_Operators folder</bold>, create a <bold>MyCustomOperator.cpp</bold> file with the following content:</para>
<para><programlisting><codeline><highlight class="normal">#include<sp/>&quot;MyCustomOperator.h&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">#include<sp/>&quot;dpf_api_i.cpp&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">namespace<sp/>custom_operators</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ansys::dpf::LibraryHandle*<sp/>staticData::_dpfLibraryHandle<sp/>=<sp/>new<sp/>ansys::dpf::LibraryHandle();</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>extern<sp/>&quot;C&quot;<sp/>CLAYER_DLLEXPORT<sp/>int<sp/>LoadOperators(ansys::dpf::AbstractCore*<sp/>core_ptr)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ansys::dpf::core::recordOperatorAtCore&lt;CustomMessage&gt;(core_ptr);<sp/>//<sp/>record<sp/>the<sp/>operator<sp/>to<sp/>make<sp/>it<sp/>accessible</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>0;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>void<sp/>CustomMessage::run(ansys::dpf::OperatorMain&amp;<sp/>main)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>get<sp/>the<sp/>input<sp/>data</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::string<sp/>to_display<sp/>=<sp/>main.getInputString(0);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>computes<sp/>the<sp/>data</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::cout<sp/>&lt;&lt;<sp/>&quot;Hello<sp/>world!<sp/>This<sp/>message<sp/>is<sp/>displayed<sp/>from<sp/>a<sp/>DPF<sp/>operator.&quot;<sp/>&lt;&lt;<sp/>std::endl;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::cout<sp/>&lt;&lt;<sp/>to_display.c_str()<sp/>&lt;&lt;<sp/>std::endl;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Set<sp/>the<sp/>final<sp/>state<sp/>of<sp/>the<sp/>operator</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>main.setSuccessed();<sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
</programlisting></para>
<para>It is now required to compile the code.</para>
</sect2></sect1>
<sect1 id="group__group__06__2_1autotoc_md47_1s1"><sect2 id="group__group__06__2_1autotoc_md47">
<title>Compile the C++ Custom operator&apos;s library</title><para>This sections details the compilation process of the C++ code.</para>
<sect3 id="group__group__06__2_1autotoc_md48">
<title>Using Visual Studio (Windows only)</title><para>In the <bold>DPF_Custom_Operators folder</bold> previously created, create a <bold>CustomOperators.vcxproj</bold> file with the following content:</para>
<para><programlisting><codeline><highlight class="normal">&lt;?xml<sp/>version=&quot;1.0&quot;<sp/>encoding=&quot;utf-8&quot;?&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;Project<sp/>DefaultTargets=&quot;Build&quot;<sp/>xmlns=&quot;http://schemas.microsoft.com/developer/msbuild/2003&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;ItemGroup<sp/>Label=&quot;ProjectConfigurations&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;ProjectConfiguration<sp/>Include=&quot;Release|x64&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;Configuration&gt;Release&lt;/Configuration&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;Platform&gt;x64&lt;/Platform&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;/ProjectConfiguration&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;/ItemGroup&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;ItemGroup&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;ClInclude<sp/>Include=&quot;.\MyCustomOperator.h&quot;<sp/>/&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;/ItemGroup&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;ItemGroup&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;ClCompile<sp/>Include=&quot;.\MyCustomOperator.cpp&quot;<sp/>/&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;/ItemGroup&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;PropertyGroup<sp/>Label=&quot;Globals&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;VCProjectVersion&gt;17.0&lt;/VCProjectVersion&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;ProjectGuid&gt;{18ED472A-4ECB-498C-A66C-805668FAABD3}&lt;/ProjectGuid&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;Keyword&gt;Win32Proj&lt;/Keyword&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;RootNamespace&gt;CustomOperators&lt;/RootNamespace&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;WindowsTargetPlatformVersion&gt;10.0&lt;/WindowsTargetPlatformVersion&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;/PropertyGroup&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;Import<sp/>Project=&quot;$(VCTargetsPath)\Microsoft.Cpp.Default.props&quot;<sp/>/&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;PropertyGroup<sp/>Condition=&quot;&apos;$(Configuration)|$(Platform)&apos;==&apos;Release|x64&apos;&quot;<sp/>Label=&quot;Configuration&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;ConfigurationType&gt;DynamicLibrary&lt;/ConfigurationType&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;UseDebugLibraries&gt;false&lt;/UseDebugLibraries&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;PlatformToolset&gt;v143&lt;/PlatformToolset&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;WholeProgramOptimization&gt;true&lt;/WholeProgramOptimization&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;CharacterSet&gt;Unicode&lt;/CharacterSet&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;/PropertyGroup&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;Import<sp/>Project=&quot;$(VCTargetsPath)\Microsoft.Cpp.props&quot;<sp/>/&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;ImportGroup<sp/>Label=&quot;ExtensionSettings&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;/ImportGroup&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;ImportGroup<sp/>Label=&quot;Shared&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;/ImportGroup&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;ImportGroup<sp/>Label=&quot;PropertySheets&quot;<sp/>Condition=&quot;&apos;$(Configuration)|$(Platform)&apos;==&apos;Release|x64&apos;&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;Import<sp/>Project=&quot;$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props&quot;<sp/>Condition=&quot;exists(&apos;$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props&apos;)&quot;<sp/>Label=&quot;LocalAppDataPlatform&quot;<sp/>/&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;/ImportGroup&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;PropertyGroup<sp/>Label=&quot;UserMacros&quot;<sp/>/&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;PropertyGroup<sp/>Condition=&quot;&apos;$(Configuration)|$(Platform)&apos;==&apos;Release|x64&apos;&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;LinkIncremental&gt;false&lt;/LinkIncremental&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;OutDir&gt;$(SolutionDir)build\$(Configuration)\&lt;/OutDir&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;/PropertyGroup&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;ItemDefinitionGroup<sp/>Condition=&quot;&apos;$(Configuration)|$(Platform)&apos;==&apos;Release|x64&apos;&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;ClCompile&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;PrecompiledHeader&gt;NotUsing&lt;/PrecompiledHeader&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;WarningLevel&gt;Level3&lt;/WarningLevel&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;Optimization&gt;MaxSpeed&lt;/Optimization&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;FunctionLevelLinking&gt;true&lt;/FunctionLevelLinking&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;IntrinsicFunctions&gt;true&lt;/IntrinsicFunctions&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;SDLCheck&gt;true&lt;/SDLCheck&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;PreprocessorDefinitions&gt;NDEBUG;_CONSOLE;%(PreprocessorDefinitions)&lt;/PreprocessorDefinitions&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;ConformanceMode&gt;true&lt;/ConformanceMode&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;AdditionalIncludeDirectories&gt;$(DPF_HGP_ROOT);%(AdditionalIncludeDirectories)&lt;/AdditionalIncludeDirectories&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;/ClCompile&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;Link&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;SubSystem&gt;Console&lt;/SubSystem&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;EnableCOMDATFolding&gt;true&lt;/EnableCOMDATFolding&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;OptimizeReferences&gt;true&lt;/OptimizeReferences&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;GenerateDebugInformation&gt;true&lt;/GenerateDebugInformation&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;/Link&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;/ItemDefinitionGroup&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;Import<sp/>Project=&quot;$(VCTargetsPath)\Microsoft.Cpp.targets&quot;<sp/>/&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;ImportGroup<sp/>Label=&quot;ExtensionTargets&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;/ImportGroup&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;/Project&gt;</highlight></codeline>
</programlisting></para>
<para>Then, open the <bold>MyCustomOperator.vcxproj project</bold> in Visual Studio and compile it.</para>
</sect3>
<sect3 id="group__group__06__2_1autotoc_md49">
<title>Using CMake (Windows and Linux)</title><para>In the <bold>DPF_Custom_Operators folder</bold> previously created, create a CMakeLists.txt file with the following content:</para>
<para><programlisting><codeline><highlight class="normal">set(CMAKE_VERBOSE_MAKEFILE<sp/>ON)</highlight></codeline>
<codeline><highlight class="normal">cmake_minimum_required(VERSION<sp/>3.16.3)</highlight></codeline>
<codeline><highlight class="normal">project(CustomOperators)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">if(NOT<sp/>DEFINED<sp/>ENV{DPF_HGP_ROOT})</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>message(FATAL_ERROR<sp/>&quot;DPF_HGP_ROOT<sp/>not<sp/>found!&quot;)</highlight></codeline>
<codeline><highlight class="normal">endif()</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">#<sp/>Compiler<sp/>options</highlight></codeline>
<codeline><highlight class="normal">#-----------------</highlight></codeline>
<codeline><highlight class="normal">if<sp/>(NOT<sp/>MSVC)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>set(CMAKE_CXX_FLAGS<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;-Wall<sp/>-Wextra<sp/>-Wconversion&quot;)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>set(CMAKE_CXX_FLAGS<sp/>&quot;${CMAKE_CXX_FLAGS}<sp/>-fvisibility=hidden&quot;)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>set(CMAKE_SHARED_LINKER_FLAGS<sp/>&quot;-fvisibility=hidden&quot;)</highlight></codeline>
<codeline><highlight class="normal">else()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>set(CMAKE_CXX_FLAGS<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;/W3<sp/>/sdl<sp/>/EHsc&quot;)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>set(CMAKE_CXX_FLAGS_RELEASE<sp/>&quot;/O2<sp/>/Oi<sp/>/Gy&quot;)</highlight></codeline>
<codeline><highlight class="normal">endif()</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">#<sp/>Dependencies</highlight></codeline>
<codeline><highlight class="normal">#-------------</highlight></codeline>
<codeline><highlight class="normal">include_directories($ENV{DPF_HGP_ROOT})</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">#<sp/>Add<sp/>library</highlight></codeline>
<codeline><highlight class="normal">#------------</highlight></codeline>
<codeline><highlight class="normal">file(GLOB<sp/>SOURCE_FILES<sp/>*.cpp)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">add_library(${CMAKE_PROJECT_NAME}<sp/>SHARED<sp/>${SOURCE_FILES})</highlight></codeline>
</programlisting></para>
<para>Then, run the following commands in a <bold>command line</bold> opened from the <bold>DPF_Custom_Operators folder</bold>.</para>
<para><programlisting><codeline><highlight class="normal">mkdir<sp/>build</highlight></codeline>
<codeline><highlight class="normal">cd<sp/>build</highlight></codeline>
<codeline><highlight class="normal">cmake<sp/>..<sp/>-DCMAKE_BUILD_TYPE=Release<sp/></highlight></codeline>
<codeline><highlight class="normal">cmake<sp/>--build<sp/>.<sp/>--config<sp/>Release</highlight></codeline>
</programlisting></para>
<para>On Windows, it creates a <bold>build/Release</bold> folder which contains the &quot;CustomOperators.dll&quot;. On Linux, it creates the &quot;libCustomOperators.so&quot; file into the <bold>build</bold> folder.</para>
</sect3>
</sect2></sect1>
<sect1 id="group__group__06__2_1autotoc_md50_1s1"><sect2 id="group__group__06__2_1autotoc_md50">
<title>Create an application that consumes the C++ Custom operator&apos;s library</title><para>The following shows how to consume the CustomOperators binary into another C++ project. The consumption is done by loading the binary in the new C++ project at runtime.</para>
<sect3 id="group__group__06__2_1autotoc_md51">
<title>Create the testing files</title><para>Set a <bold>DPF_Custom_Operators environment variable</bold> to the <bold>DPF_Custom_Operators folder</bold>.</para>
<para>In the <bold>DPF_Custom_Operators folder</bold> previously created, create a <bold>DPF_application</bold> folder.</para>
<para>In the <bold>DPF_application</bold> folder, create a CustomOperatorsTest.cpp with the following content:</para>
<para><programlisting><codeline><highlight class="normal">#include<sp/>&quot;dpf_api.h&quot;</highlight></codeline>
<codeline><highlight class="normal">#include<sp/>&quot;dpf_api_i.cpp&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">int<sp/>main(int<sp/>argc,<sp/>char**<sp/>argv)</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/>Initialize<sp/>DPF<sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ansys::dpf::LibraryHandle*<sp/>lib<sp/>=<sp/>new<sp/>ansys::dpf::LibraryHandle();</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ansys::dpf::DpfError<sp/>libDpfError<sp/>=<sp/>lib-&gt;error();</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>if(!libDpfError.isOk())</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::cout<sp/>&lt;&lt;<sp/>&quot;DPF<sp/>initialization<sp/>failed.&quot;<sp/>&lt;&lt;<sp/>std::endl;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::string<sp/>error_message<sp/>=<sp/>libDpfError.message();</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>(!error_message.empty())</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::cout<sp/>&lt;&lt;<sp/>error_message.c_str()<sp/>&lt;&lt;<sp/>std::endl;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>1;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/>Load<sp/>the<sp/>DPF<sp/>Custom<sp/>operator&apos;s<sp/>library<sp/>to<sp/>access<sp/>the<sp/>&quot;custom_message&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>const<sp/>char*<sp/>val<sp/>=<sp/>getenv(&quot;DPF_Custom_Operators&quot;);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>if<sp/>(!val)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::cout<sp/>&lt;&lt;<sp/>&quot;DPF_Custom_Operators<sp/>environment<sp/>variable<sp/>not<sp/>found!&quot;<sp/>&lt;&lt;<sp/>std::endl;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>1;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>#ifdef<sp/>__linux__</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>std::string<sp/>path_to_dll<sp/>=<sp/>std::string(val)<sp/>+<sp/>&quot;/build/libCustomOperators.so&quot;;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>#else</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>std::string<sp/>path_to_dll<sp/>=<sp/>std::string(val)<sp/>+<sp/>&quot;/build/Release/CustomOperators.dll&quot;;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>#endif</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ansys::dpf::core::loadDpfPlugin(path_to_dll,<sp/>&quot;custom_operators&quot;);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/>use<sp/>the<sp/>Custom<sp/>Operator</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ansys::dpf::Operator<sp/>custom_operator(&quot;custom_message&quot;);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>if<sp/>(custom_operator.empty())</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::cout<sp/>&lt;&lt;<sp/>&quot;CustomOperators<sp/>load<sp/>failed.&quot;<sp/>&lt;&lt;<sp/>std::endl;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>1;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>std::string<sp/>custom_message_str<sp/>=<sp/>&quot;This<sp/>is<sp/>a<sp/>DPF<sp/>custom<sp/>message.&quot;;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>custom_operator.connect(0,<sp/>custom_message_str);<sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>custom_operator.run();</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>delete<sp/>lib;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>return<sp/>0;</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
</programlisting></para>
</sect3>
<sect3 id="group__group__06__2_1autotoc_md52">
<title>Compile the test application</title><sect4 id="group__group__06__2_1autotoc_md53">
<title>With CMake (Windows and Linux)</title><para>In the <bold>DPF_application</bold> folder, create a CMakeLists.txt file with the following content:</para>
<para><programlisting><codeline><highlight class="normal">set(CMAKE_VERBOSE_MAKEFILE<sp/>ON)</highlight></codeline>
<codeline><highlight class="normal">cmake_minimum_required(VERSION<sp/>3.16.3)</highlight></codeline>
<codeline><highlight class="normal">project(CustomOperatorsTest)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">if(NOT<sp/>DEFINED<sp/>ENV{DPF_HGP_ROOT})</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>message(FATAL_ERROR<sp/>&quot;DPF_HGP_ROOT<sp/>not<sp/>found!&quot;)</highlight></codeline>
<codeline><highlight class="normal">endif()</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">if(NOT<sp/>DEFINED<sp/>ENV{DPF_Custom_Operators})</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>message(FATAL_ERROR<sp/>&quot;DPF_Custom_Operators<sp/>not<sp/>found!&quot;)</highlight></codeline>
<codeline><highlight class="normal">endif()</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">#<sp/>Compiler<sp/>options</highlight></codeline>
<codeline><highlight class="normal">#-----------------</highlight></codeline>
<codeline><highlight class="normal">if<sp/>(NOT<sp/>MSVC)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>set(CMAKE_CXX_FLAGS<sp/><sp/>&quot;-ldl<sp/>-Wall<sp/>-Wextra<sp/>-Wconversion&quot;)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>add_definitions(-D_CRT_SECURE_NO_WARNINGS)</highlight></codeline>
<codeline><highlight class="normal">else()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>add_definitions(-D_CRT_SECURE_NO_WARNINGS)</highlight></codeline>
<codeline><highlight class="normal">endif()</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">#<sp/>Dependencies</highlight></codeline>
<codeline><highlight class="normal">#-------------</highlight></codeline>
<codeline><highlight class="normal">include_directories($ENV{DPF_HGP_ROOT})</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">#<sp/>Add<sp/>library</highlight></codeline>
<codeline><highlight class="normal">#------------</highlight></codeline>
<codeline><highlight class="normal">file(GLOB<sp/>SOURCE_FILES<sp/>*.cpp)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">add_executable(${PROJECT_NAME}<sp/>${SOURCE_FILES})</highlight></codeline>
</programlisting></para>
<para>Run the following commands in a <bold>command line</bold> opened from the <bold>DPF_application folder</bold>.</para>
<para><programlisting><codeline><highlight class="normal">mkdir<sp/>build</highlight></codeline>
<codeline><highlight class="normal">cd<sp/>build</highlight></codeline>
<codeline><highlight class="normal">cmake<sp/>..<sp/>-DCMAKE_BUILD_TYPE=Release<sp/></highlight></codeline>
<codeline><highlight class="normal">cmake<sp/>--build<sp/>.<sp/>--config<sp/>Release</highlight></codeline>
</programlisting></para>
</sect4>
<sect4 id="group__group__06__2_1autotoc_md54">
<title>With Visual Studio (Windows only)</title><para>In the <bold>DPF_application</bold> folder, create a <bold>CustomOperatorsTest.vcxproj</bold> file with the following content:</para>
<para><programlisting><codeline><highlight class="normal">&lt;?xml<sp/>version=&quot;1.0&quot;<sp/>encoding=&quot;utf-8&quot;?&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;Project<sp/>DefaultTargets=&quot;Build&quot;<sp/>xmlns=&quot;http://schemas.microsoft.com/developer/msbuild/2003&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;ItemGroup<sp/>Label=&quot;ProjectConfigurations&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;ProjectConfiguration<sp/>Include=&quot;Release|x64&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;Configuration&gt;Release&lt;/Configuration&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;Platform&gt;x64&lt;/Platform&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;/ProjectConfiguration&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;/ItemGroup&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;ItemGroup&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;ClCompile<sp/>Include=&quot;.\CustomOperatorsTest.cpp&quot;<sp/>/&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;/ItemGroup&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;PropertyGroup<sp/>Label=&quot;Globals&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;VCProjectVersion&gt;17.0&lt;/VCProjectVersion&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;ProjectGuid&gt;{129D604D-EF32-4091-ABAD-BF3622AF6F08}&lt;/ProjectGuid&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;Keyword&gt;Win32Proj&lt;/Keyword&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;RootNamespace&gt;CustomOperatorsTest&lt;/RootNamespace&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;WindowsTargetPlatformVersion&gt;10.0&lt;/WindowsTargetPlatformVersion&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;/PropertyGroup&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;Import<sp/>Project=&quot;$(VCTargetsPath)\Microsoft.Cpp.Default.props&quot;<sp/>/&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;PropertyGroup<sp/>Condition=&quot;&apos;$(Configuration)|$(Platform)&apos;==&apos;Release|x64&apos;&quot;<sp/>Label=&quot;Configuration&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;ConfigurationType&gt;Application&lt;/ConfigurationType&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;UseDebugLibraries&gt;false&lt;/UseDebugLibraries&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;PlatformToolset&gt;v143&lt;/PlatformToolset&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;WholeProgramOptimization&gt;true&lt;/WholeProgramOptimization&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;CharacterSet&gt;Unicode&lt;/CharacterSet&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;/PropertyGroup&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;Import<sp/>Project=&quot;$(VCTargetsPath)\Microsoft.Cpp.props&quot;<sp/>/&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;ImportGroup<sp/>Label=&quot;ExtensionSettings&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;/ImportGroup&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;ImportGroup<sp/>Label=&quot;Shared&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;/ImportGroup&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;ImportGroup<sp/>Label=&quot;PropertySheets&quot;<sp/>Condition=&quot;&apos;$(Configuration)|$(Platform)&apos;==&apos;Release|x64&apos;&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;Import<sp/>Project=&quot;$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props&quot;<sp/>Condition=&quot;exists(&apos;$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props&apos;)&quot;<sp/>Label=&quot;LocalAppDataPlatform&quot;<sp/>/&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;/ImportGroup&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;PropertyGroup<sp/>Label=&quot;UserMacros&quot;<sp/>/&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;PropertyGroup<sp/>Condition=&quot;&apos;$(Configuration)|$(Platform)&apos;==&apos;Release|x64&apos;&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;LinkIncremental&gt;false&lt;/LinkIncremental&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;/PropertyGroup&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;ItemDefinitionGroup<sp/>Condition=&quot;&apos;$(Configuration)|$(Platform)&apos;==&apos;Release|x64&apos;&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;ClCompile&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;PrecompiledHeader&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;/PrecompiledHeader&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;WarningLevel&gt;Level3&lt;/WarningLevel&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;Optimization&gt;MaxSpeed&lt;/Optimization&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;FunctionLevelLinking&gt;true&lt;/FunctionLevelLinking&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;IntrinsicFunctions&gt;true&lt;/IntrinsicFunctions&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;SDLCheck&gt;true&lt;/SDLCheck&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;PreprocessorDefinitions&gt;NDEBUG;_CONSOLE;_CRT_SECURE_NO_WARNINGS;%(PreprocessorDefinitions)&lt;/PreprocessorDefinitions&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;ConformanceMode&gt;true&lt;/ConformanceMode&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;AdditionalIncludeDirectories&gt;$(DPF_HGP_ROOT);%(AdditionalIncludeDirectories)&lt;/AdditionalIncludeDirectories&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;/ClCompile&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;Link&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;SubSystem&gt;Console&lt;/SubSystem&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;EnableCOMDATFolding&gt;true&lt;/EnableCOMDATFolding&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;OptimizeReferences&gt;true&lt;/OptimizeReferences&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;GenerateDebugInformation&gt;true&lt;/GenerateDebugInformation&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;/Link&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;/ItemDefinitionGroup&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;Import<sp/>Project=&quot;$(VCTargetsPath)\Microsoft.Cpp.targets&quot;<sp/>/&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;ImportGroup<sp/>Label=&quot;ExtensionTargets&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;/ImportGroup&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;/Project&gt;</highlight></codeline>
</programlisting></para>
</sect4>
</sect3>
<sect3 id="group__group__06__2_1autotoc_md55">
<title>Run the test application</title><sect4 id="group__group__06__2_1autotoc_md56">
<title>With CMake</title><para>Run the following command in a <bold>command line</bold> opened from the <bold>DPF_application folder</bold>.</para>
<para>On Windows, use the following:</para>
<para><programlisting><codeline><highlight class="normal">set<sp/>PATH=%AWP_ROOT271%/aisol/bin/winx64;%PATH%</highlight></codeline>
<codeline><highlight class="normal">cd<sp/>build</highlight></codeline>
<codeline><highlight class="normal">cd<sp/>Release</highlight></codeline>
<codeline><highlight class="normal">CustomOperatorsTest.exe</highlight></codeline>
</programlisting></para>
<para>Setting the PATH is required to find DPF entry point (DataProcessingCore.dll).</para>
<para>On Linux, use the following:</para>
<para><programlisting><codeline><highlight class="normal">export<sp/>LD_LIBRARY_PATH=${AWP_ROOT271}/aisol/dll/linx64&quot;;${LD_LIBRARY_PATH}</highlight></codeline>
<codeline><highlight class="normal">cd<sp/>build</highlight></codeline>
<codeline><highlight class="normal">./CustomOperatorsTest</highlight></codeline>
</programlisting></para>
<para>Setting the LD_LIBRARY_PATH is required to find DPF entry point (libDataProcessingCore.so).</para>
<para>If you face licensing issues, the ANSYSLMD_LICENSE_FILE might must be set. Refer to the <ulink url="https://dpf.docs.pyansys.com/version/stable/user_guide/getting_started_with_dpf_server.html#license-terms">License terms section</ulink> to learn how to set it.</para>
</sect4>
<sect4 id="group__group__06__2_1autotoc_md57">
<title>With Visual Studio</title><para>Edit your environment variables and update the PATH value inserting a &quot;%AWP_ROOT@doc_ansys_ver%/aisol/bin/winx64&quot; field. It is needed that the application can find DPF entry point (DataProcessingCore.dll) while running. Edit your environment variables and create a DPF_Custom_Operators variable that targets the <bold>DPF_Custom_Operators folder</bold> location. Open the <bold>CustomOperatorsTest.vcxproj project</bold> in Visual Studio. Compile it. Press F5 to run the code.</para>
</sect4>
<sect4 id="group__group__06__2_1autotoc_md58">
<title>Result</title><para>The following message should appear:</para>
<para><programlisting><codeline><highlight class="normal">Hello<sp/>world!<sp/>This<sp/>message<sp/>is<sp/>displayed<sp/>from<sp/>a<sp/>DPF<sp/>operator.</highlight></codeline>
<codeline><highlight class="normal">This<sp/>is<sp/>a<sp/>DPF<sp/>custom<sp/>message.</highlight></codeline>
</programlisting> </para>
</sect4>
</sect3>
</sect2></sect1>
    </detaileddescription>
  </compounddef>
</doxygen>
