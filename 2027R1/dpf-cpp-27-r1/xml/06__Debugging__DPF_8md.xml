<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.16.1" xml:lang="en-US">
  <compounddef id="06__Debugging__DPF_8md" kind="file" language="Markdown">
    <compoundname>06_Debugging_DPF.md</compoundname>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline><highlight class="normal"><sp/>@defgroup<sp/>group_06<sp/>Debugging<sp/>in<sp/>DPF</highlight></codeline>
<codeline><highlight class="normal"><sp/>@ingroup<sp/>group_4_how_tos</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Debugging<sp/>enables<sp/>you<sp/>to<sp/>analyze<sp/>how<sp/>DPF<sp/>runs<sp/>and<sp/>generates<sp/>data<sp/>so<sp/>that<sp/>you<sp/>can<sp/>find<sp/>defects<sp/>in<sp/>your<sp/>code.<sp/>You<sp/>can<sp/>use<sp/>the<sp/>Watch<sp/>window<sp/>in<sp/>Visual<sp/>Studio<sp/>to<sp/>visualize<sp/>any<sp/>member<sp/>of<sp/>any<sp/>object.&lt;br&gt;&lt;br&gt;![](debugger.png)&lt;br&gt;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">**Topics:**</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">-<sp/>[How<sp/>the<sp/>Debug<sp/>View<sp/>Works](#debug1)</highlight></codeline>
<codeline><highlight class="normal">-<sp/>[Custom<sp/>Views<sp/>with<sp/>Natvis<sp/>Files](#debug2)</highlight></codeline>
<codeline><highlight class="normal">-<sp/>[Combining<sp/>Graph<sp/>Visualization<sp/>with<sp/>Natvis<sp/>Views](#debug3)</highlight></codeline>
<codeline><highlight class="normal">-<sp/>[Usages<sp/>for<sp/>the<sp/>CodeDV<sp/>Property<sp/>Sheet](#debug4)</highlight></codeline>
<codeline><highlight class="normal">-<sp/>[Using<sp/>the<sp/>DebugTrace<sp/>Function](#debug5)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>&lt;a<sp/>name=&quot;debug1&quot;&gt;&lt;/a&gt;How<sp/>the<sp/>Debug<sp/>View<sp/>Works</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>debugger<sp/>can<sp/>access<sp/>any<sp/>part<sp/>of<sp/>the<sp/>debugged<sp/>program&apos;s<sp/>memory<sp/>regardless<sp/>of<sp/>the<sp/>compilation<sp/>setting<sp/>that<sp/>you<sp/>use<sp/>(Debug/Release).<sp/>To<sp/>access<sp/>the<sp/>memory,<sp/>the<sp/>debugger<sp/>uses<sp/>information<sp/>from<sp/>a<sp/>Program<sp/>Database<sp/>(.pdb)<sp/>file.<sp/>A<sp/>PDB<sp/>file<sp/>is<sp/>typically<sp/>created<sp/>from<sp/>source<sp/>files<sp/>during<sp/>compilation.<sp/>It<sp/>enables<sp/>the<sp/>debugger<sp/>to<sp/>easily<sp/>navigate<sp/>through<sp/>objects<sp/>using<sp/>C++-like<sp/>expressions.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>default<sp/>debug<sp/>view<sp/>constructs<sp/>a<sp/>standard<sp/>visualization<sp/>for<sp/>any<sp/>class.<sp/>However,<sp/>you<sp/>can<sp/>define<sp/>your<sp/>own<sp/>visualization<sp/>using<sp/>[Natvis<sp/>files](#debug2).&lt;br&gt;&lt;br&gt;![](debug-views.png)&lt;br&gt;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>&lt;a<sp/>name=&quot;debug2&quot;&gt;&lt;/a&gt;Custom<sp/>Visualization<sp/>with<sp/>Natvis<sp/>Files</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>Visual<sp/>Studio<sp/>Natvis<sp/>framework<sp/>customizes<sp/>the<sp/>way<sp/>types<sp/>appear<sp/>in<sp/>the<sp/>debug<sp/>view.<sp/>For<sp/>more<sp/>information,<sp/>see<sp/>[Create<sp/>custom<sp/>views<sp/>of<sp/>C++<sp/>objects<sp/>in<sp/>the<sp/>debugger<sp/>using<sp/>the<sp/>Natvis<sp/>framework](https://docs.microsoft.com/en-us/visualstudio/debugger/create-custom-views-of-native-objects?view=vs-2022).</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>comparison<sp/>below<sp/>provides<sp/>an<sp/>example<sp/>of<sp/>the<sp/>customization<sp/>that<sp/>can<sp/>be<sp/>achieved<sp/>with<sp/>a<sp/>.natvis<sp/>file.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">**Default<sp/>view<sp/>with<sp/>no<sp/>customization:**&lt;br&gt;&lt;br&gt;![](no-natvis.png)&lt;br&gt;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">**Custom<sp/>Natvis<sp/>view:**&lt;br&gt;&lt;br&gt;![](with-natvis.png)&lt;br&gt;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>&lt;a<sp/>name=&quot;debug3&quot;&gt;&lt;/a&gt;Combining<sp/>Graph<sp/>Visualization<sp/>with<sp/>Natvis<sp/>Views</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">In<sp/>programming,<sp/>graphs<sp/>provide<sp/>a<sp/>visual<sp/>map<sp/>of<sp/>your<sp/>data<sp/>structure<sp/>and<sp/>the<sp/>relationships<sp/>between<sp/>different<sp/>classes.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">To<sp/>enable<sp/>graph<sp/>visualization,<sp/>workflows<sp/>in<sp/>DPF<sp/>have<sp/>a<sp/>Graphviz<sp/>export<sp/>method:&lt;br&gt;&lt;br&gt;![](graphviz-export.png)&lt;br&gt;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Graphviz<sp/>is<sp/>an<sp/>open-source<sp/>graph<sp/>visualization<sp/>tool<sp/>that<sp/>takes<sp/>a<sp/>text<sp/>description<sp/>of<sp/>a<sp/>graph<sp/>and<sp/>generates<sp/>a<sp/>diagram<sp/>for<sp/>you.<sp/>For<sp/>details<sp/>see<sp/>[https://graphviz.org](https://graphviz.org).</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Many<sp/>tools<sp/>are<sp/>available<sp/>to<sp/>render<sp/>Graphviz<sp/>diagrams<sp/>in<sp/>useful<sp/>formats<sp/>such<sp/>as<sp/>SVG<sp/>images.<sp/>For<sp/>example,</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">-<sp/>Notepad++<sp/>plugin</highlight></codeline>
<codeline><highlight class="normal">-<sp/>[https://dreampuf.github.io/GraphvizOnline](https://dreampuf.github.io/GraphvizOnline)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">When<sp/>you<sp/>use<sp/>a<sp/>Graphviz<sp/>diagram<sp/>in<sp/>combination<sp/>with<sp/>a<sp/>Natvis<sp/>view,<sp/>you<sp/>can<sp/>see<sp/>the<sp/>content<sp/>of<sp/>each<sp/>operator<sp/>of<sp/>a<sp/>workflow<sp/>(using<sp/>their<sp/>IDs).&lt;br&gt;&lt;br&gt;![](graph-combo.png)&lt;br&gt;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>&lt;a<sp/>name=&quot;debug4&quot;&gt;&lt;/a&gt;Usages<sp/>for<sp/>the<sp/>CodeDV<sp/>Property<sp/>Sheet</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">There<sp/>are<sp/>two<sp/>main<sp/>usages<sp/>for<sp/>CodeDV:DataProcessingHourglass.props:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">-<sp/>**Developing<sp/>DPF<sp/>for<sp/>Ansys<sp/>Mechanical**:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>-<sp/>You<sp/>compile<sp/>DPF<sp/>and<sp/>have<sp/>a<sp/>DPF<sp/>repository</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>-<sp/>You<sp/>want<sp/>to<sp/>use<sp/>your<sp/>own<sp/>binaries<sp/>and<sp/>API</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>-<sp/>By<sp/>defining<sp/>the<sp/>environment<sp/>variable<sp/>**DPF_DEV=true**,<sp/>the<sp/>DPF<sp/>repository<sp/>is<sp/>consumed</highlight></codeline>
<codeline><highlight class="normal"><sp/></highlight></codeline>
<codeline><highlight class="normal">-<sp/>**Developing<sp/>components<sp/>that<sp/>consume<sp/>DPF**:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>-<sp/>You<sp/>do<sp/>not<sp/>compile<sp/>DPF<sp/>or<sp/>have<sp/>a<sp/>DPF<sp/>repository,<sp/>but<sp/>would<sp/>find<sp/>debugging<sp/>helpful</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>-<sp/>By<sp/>defining<sp/>the<sp/>environment<sp/>variable<sp/>**DPF_COPY_DLL=true**,<sp/>the<sp/>DLL<sp/>and<sp/>PDB<sp/>from<sp/>the<sp/>DPF<sp/>package<sp/>are<sp/>dropped<sp/>into<sp/>the<sp/>program<sp/>directory,<sp/>enabling<sp/>debug<sp/>insight</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>&lt;a<sp/>name=&quot;debug5&quot;&gt;&lt;/a&gt;Using<sp/>the<sp/>DebugTrace<sp/>Function</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">DebugTrace<sp/>is<sp/>a<sp/>special<sp/>mechanism<sp/>that<sp/>writes<sp/>the<sp/>input/output<sp/>of<sp/>each<sp/>and<sp/>every<sp/>operator/workflow<sp/>that<sp/>runs<sp/>within<sp/>DPF.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">There<sp/>are<sp/>two<sp/>ways<sp/>to<sp/>turn<sp/>on<sp/>DebugTrace:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">-<sp/>Set<sp/>the<sp/>environment<sp/>variable<sp/>**DATAPROCESSING_DEBUG**<sp/>to<sp/>the<sp/>path<sp/>where<sp/>you<sp/>want<sp/>your<sp/>trace<sp/>to<sp/>be<sp/>dumped</highlight></codeline>
<codeline><highlight class="normal">-<sp/>Directly<sp/>within<sp/>Ansys<sp/>Mechanical,<sp/>use<sp/>**Ans.DataProcessing.DataProcessing.ActivateDebugTraceâ€‹**</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>&lt;a<sp/>name=&quot;debug6&quot;&gt;&lt;/a&gt;Producing<sp/>Chrome<sp/>Trace<sp/>Event<sp/>traces</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">You<sp/>can<sp/>produce<sp/>traces<sp/>that<sp/>follow<sp/>the<sp/>execution<sp/>of<sp/>operators<sp/>and<sp/>workflows<sp/>in<sp/>a<sp/>format<sp/>that<sp/>can<sp/>be<sp/>interactively</highlight></codeline>
<codeline><highlight class="normal">opened<sp/>and<sp/>explored.<sp/>This<sp/>approach<sp/>does<sp/>not<sp/>carry<sp/>any<sp/>result<sp/>data,<sp/>unlike<sp/><sp/>**DATAPROCESSING_DEBUG**.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">To<sp/>create<sp/>the<sp/>files:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">1.<sp/>Set<sp/>the<sp/>value<sp/>of<sp/>the<sp/>**DPF_CHROME_TRACES_ROOT**<sp/>environment<sp/>variable<sp/>to<sp/>the<sp/>folder<sp/>where<sp/>you<sp/>want<sp/>to<sp/>create<sp/>the<sp/>file.</highlight></codeline>
<codeline><highlight class="normal">2.<sp/>Run<sp/>a<sp/>DPF<sp/>operator/workflow,<sp/>a<sp/>JSON<sp/>file<sp/>is<sp/>created<sp/>for<sp/>each<sp/>process<sp/>using<sp/>DPF<sp/>and<sp/>is<sp/>stored<sp/>in<sp/>the<sp/>folder<sp/>selected<sp/>in<sp/>step<sp/>1.</highlight></codeline>
<codeline><highlight class="normal">3.<sp/>Open<sp/>any<sp/>chrome-based<sp/>browser<sp/>(Edge,<sp/>Chromium,<sp/>Chrome,<sp/>and<sp/>so<sp/>on).</highlight></codeline>
<codeline><highlight class="normal">4.<sp/>Navigate<sp/>to<sp/>the<sp/>special<sp/>`about:tracing`<sp/>URL.</highlight></codeline>
<codeline><highlight class="normal">5.<sp/>Drop<sp/>one<sp/>of<sp/>the<sp/>files<sp/>in<sp/>this<sp/>location.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">This<sp/>file<sp/>also<sp/>contains<sp/>metrics<sp/>for<sp/>memory<sp/>consumption<sp/>of<sp/>the<sp/>process.<sp/>While<sp/>these<sp/>metrics<sp/>can<sp/>be<sp/>used<sp/>to<sp/>identify</highlight></codeline>
<codeline><highlight class="normal">large<sp/>memory<sp/>allocation<sp/>from<sp/>operators,<sp/>it<sp/>does<sp/>not<sp/>provide<sp/>an<sp/>accurate<sp/>representation<sp/>of<sp/>the<sp/>memory<sp/>allocated<sp/>by<sp/>DPF.</highlight></codeline>
<codeline><highlight class="normal">Memory<sp/>is<sp/>allocated<sp/>for<sp/>the<sp/>whole<sp/>process,<sp/>not<sp/>just<sp/>DPF.<sp/>This<sp/>may<sp/>include<sp/>memory<sp/>mapped<sp/>files<sp/>and<sp/>duplicates<sp/>for<sp/>shared</highlight></codeline>
<codeline><highlight class="normal">memory<sp/>between<sp/>processes<sp/>and<sp/>do<sp/>not<sp/>accurately<sp/>represent<sp/>the<sp/>time<sp/>when<sp/>memory<sp/>is<sp/>freed.<sp/>They<sp/>are<sp/>not<sp/>comparable</highlight></codeline>
<codeline><highlight class="normal">between<sp/>different<sp/>DPF<sp/>releases<sp/>or<sp/>different<sp/>operating<sp/>systems.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">On<sp/>Windows,<sp/>the<sp/>available<sp/>measures<sp/>are<sp/>`WorkingSetSize`<sp/>and<sp/>`PrivateUsage`<sp/>from<sp/>[PROCESS_MEMORY_COUNTERS_EX](https://learn.microsoft.com/en-us/windows/win32/api/psapi/ns-psapi-process_memory_counters_ex),<sp/>in<sp/>bytes.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">On<sp/>Linux,<sp/>the<sp/>available<sp/>measures<sp/>are<sp/>a<sp/>subset<sp/>of<sp/>the<sp/>[statm<sp/>file](https://www.kernel.org/doc/Documentation/filesystems/proc.txt)<sp/>(Table<sp/>1-3),<sp/>in<sp/>bytes.</highlight></codeline>
<codeline><highlight class="normal">-<sp/>**size**:<sp/>The<sp/>total<sp/>program<sp/>size<sp/>in<sp/>memory<sp/>(virtual<sp/>memory,<sp/>too),<sp/>including<sp/>all<sp/>code,<sp/>data,<sp/>and<sp/>shared<sp/>libraries.<sp/>Often<sp/>referred<sp/>to<sp/>as<sp/>the<sp/>process&apos;s<sp/>virtual<sp/>memory<sp/>size<sp/>(VM<sp/>size).</highlight></codeline>
<codeline><highlight class="normal">-<sp/>**resident_size**:<sp/>The<sp/>Resident<sp/>Set<sp/>Size<sp/>(RSS)<sp/>is<sp/>the<sp/>amount<sp/>of<sp/>physical<sp/>RAM<sp/>directly<sp/>allocated<sp/>to<sp/>the<sp/>process.<sp/>RSS<sp/>=<sp/>TRS<sp/>+<sp/>DRS<sp/>+<sp/>Shared</highlight></codeline>
<codeline><highlight class="normal">-<sp/>**trs**:<sp/>The<sp/>Text<sp/>Resident<sp/>Size<sp/>(TRS)<sp/>is<sp/>the<sp/>amount<sp/>of<sp/>physical<sp/>RAM<sp/>that&apos;s<sp/>occupied<sp/>by<sp/>code<sp/>(text<sp/>segment)<sp/>of<sp/>the<sp/>current<sp/>program.<sp/>It&apos;s<sp/>rarely<sp/>used<sp/>for<sp/>debugging.<sp/>The<sp/>TRS<sp/>is<sp/>a<sp/>subset<sp/>of<sp/>the<sp/>RSS.</highlight></codeline>
<codeline><highlight class="normal">-<sp/>**drs**:<sp/>The<sp/>Data<sp/>Resident<sp/>Size<sp/>(DRS)<sp/>is<sp/>the<sp/>amount<sp/>of<sp/>physical<sp/>RAM<sp/>that&apos;s<sp/>occupied<sp/>by<sp/>data<sp/>segment<sp/>plus<sp/>the<sp/>heap.<sp/>It&apos;s<sp/>memory<sp/>used<sp/>for<sp/>variables,<sp/>dynamic<sp/>allocations,<sp/>and<sp/>other<sp/>non-code<sp/>sections.<sp/>The<sp/>DRS<sp/>is<sp/>a<sp/>subset<sp/>of<sp/>the<sp/>RSS.</highlight></codeline>
<codeline><highlight class="normal">-<sp/>**shared**:<sp/>The<sp/>amount<sp/>of<sp/>physical<sp/>RAM<sp/>that<sp/>is<sp/>shared<sp/>with<sp/>other<sp/>processes.</highlight></codeline>
    </programlisting>
    <location file="cpp_doc/06_Debugging_DPF.md"/>
  </compounddef>
</doxygen>
