<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.16.1" xml:lang="en-US">
  <compounddef id="WorkflowExamples_8cpp-example" kind="example">
    <compoundname>WorkflowExamples.cpp</compoundname>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para>Examples of DPF workflows that compute data. <programlisting filename="WorkflowExamples.cpp"><codeline><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="comment">//<sp/>COPYRIGHT<sp/>ANSYS.<sp/>ALL<sp/>RIGHTS<sp/>RESERVED.</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;dpf_api.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;limits&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXAMPLE</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;Example.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;gtest/gtest.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">TEST(WorkflowExample,<sp/>TotalDeformation)</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>elementary<sp/>workflow<sp/>allows<sp/>the<sp/>user<sp/>to<sp/>simply<sp/>read<sp/>a<sp/>displacement<sp/>vector<sp/>from<sp/>an<sp/>analysis<sp/>and<sp/>compute<sp/>its<sp/>norm.</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>set<sp/>the<sp/>result<sp/>file<sp/>path<sp/>to<sp/>the<sp/>right<sp/>path</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>std::string<sp/>fileName(</highlight><highlight class="stringliteral">&quot;../../../testfiles/mapdl_files/TwoSolids.rst&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1DataSources" kindref="compound">ansys::dpf::DataSources</ref><sp/>my_data_sources;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>my_data_sources.<ref refid="classansys_1_1dpf_1_1DataSources_1ad2a5bb6f24ca621ffaaee9e7a47cdc20" kindref="member">addResultFile</ref>(fileName);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref><sp/>u_op(</highlight><highlight class="stringliteral">&quot;U&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>u_op.connect(<ref refid="namespaceansys_1_1dpf_1aa4a44a04a0aafb8fe0645f019bbd94d1a5b6613f802062fde4faea4b553db7fbc" kindref="member">ansys::dpf::eDataSourcesPin</ref>,<sp/>my_data_sources);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref><sp/>norm_op(</highlight><highlight class="stringliteral">&quot;norm_fc&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>norm_op.connect(u_op);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1FieldsContainer" kindref="compound">ansys::dpf::FieldsContainer</ref><sp/>my_u_norm<sp/>=<sp/>norm_op.getOutputFieldsContainer(0);</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">TEST(WorkflowExample,<sp/>MinMaxOverTimeOfVonMisesStress)</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>workflow<sp/>allows<sp/>users<sp/>to<sp/>read<sp/>the<sp/>stress<sp/>tensors<sp/>for<sp/>a<sp/>range<sp/>of<sp/>time<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>steps<sp/>from<sp/>an<sp/>analysis,<sp/>to<sp/>implicitly<sp/>average<sp/>those<sp/>elemental<sp/>nodal<sp/>tensors<sp/>to<sp/>a<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>nodal<sp/>location,<sp/>to<sp/>compute<sp/>its<sp/>Von<sp/>Mises<sp/>equivalent<sp/>and<sp/>finally,<sp/>to<sp/>compute<sp/>the<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>minimum<sp/>and<sp/>the<sp/>maximum<sp/>over<sp/>time<sp/>for<sp/>each<sp/>component<sp/>of<sp/>the<sp/>nodal<sp/>equivalent<sp/>tensors.<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>workflow<sp/>is<sp/>an<sp/>example<sp/>use<sp/>case<sp/>of<sp/>the<sp/>time<sp/>scoping<sp/>pin.<sp/>This<sp/>pin<sp/>expects<sp/>a<sp/>scoping<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>in<sp/>input<sp/>and<sp/>allows<sp/>the<sp/>user<sp/>to<sp/>choose<sp/>the<sp/>time<sp/>or<sp/>frequency<sp/>sets<sp/>of<sp/>his<sp/>results.</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>set<sp/>the<sp/>result<sp/>file<sp/>path<sp/>to<sp/>the<sp/>right<sp/>path</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>std::string<sp/>fileName(</highlight><highlight class="stringliteral">&quot;../../../testfiles/mapdl_files/TwoSolids.rst&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1DataSources" kindref="compound">ansys::dpf::DataSources</ref><sp/>my_data_sources;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>my_data_sources.<ref refid="classansys_1_1dpf_1_1DataSources_1ad2a5bb6f24ca621ffaaee9e7a47cdc20" kindref="member">addResultFile</ref>(fileName);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref><sp/>stress_op(</highlight><highlight class="stringliteral">&quot;S&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>stress_op.connect(<ref refid="namespaceansys_1_1dpf_1aa4a44a04a0aafb8fe0645f019bbd94d1a5b6613f802062fde4faea4b553db7fbc" kindref="member">ansys::dpf::eDataSourcesPin</ref>,<sp/>my_data_sources);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>stress_op.connect(<ref refid="namespaceansys_1_1dpf_1aa4a44a04a0aafb8fe0645f019bbd94d1ac390a52dd8c4f1e8ff81a162cdc04d4f" kindref="member">ansys::dpf::eTimeScopPin</ref>,<sp/>{<sp/>1<sp/>});</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>stress_op.connect(<ref refid="namespaceansys_1_1dpf_1aa4a44a04a0aafb8fe0645f019bbd94d1aa8522e00b69f3a2f2626a088f20823fe" kindref="member">ansys::dpf::eLocationPin</ref>,<sp/><ref refid="structansys_1_1dpf_1_1locations_1aa4e1967b0838d8597200c606c8564d29" kindref="member">ansys::dpf::locations::nodal</ref>);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref><sp/>eqv_op(</highlight><highlight class="stringliteral">&quot;eqv_fc&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>eqv_op.connect(stress_op);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref><sp/>min_max_op(</highlight><highlight class="stringliteral">&quot;min_max_fc&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>min_max_op.connect(eqv_op);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Field" kindref="compound">ansys::dpf::Field</ref><sp/>my_min<sp/>=<sp/>min_max_op.getOutputField(0);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Field" kindref="compound">ansys::dpf::Field</ref><sp/>my_max<sp/>=<sp/>min_max_op.getOutputField(1);</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">TEST(WorkflowExample,<sp/>StrainTensorsScopedOnNamedSelection)</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>workflow<sp/>is<sp/>an<sp/>example<sp/>use<sp/>case<sp/>of<sp/>the<sp/>mesh<sp/>scoping<sp/>in<sp/>input<sp/>of<sp/>a<sp/>result<sp/>reader.<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Here,<sp/>the<sp/>user<sp/>can<sp/>extract<sp/>a<sp/>mesh<sp/>scoping<sp/>(a<sp/>set<sp/>of<sp/>spatial<sp/>entities:<sp/>node<sp/>or<sp/>elements<sp/>for<sp/>example)<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>from<sp/>a<sp/>named<sp/>selection<sp/>created<sp/>in<sp/>mechanical<sp/>or<sp/>mapdl.<sp/>This<sp/>mesh<sp/>scoping<sp/>is<sp/>then<sp/>used<sp/>as<sp/>an<sp/>input<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>of<sp/>a<sp/>strain<sp/>tensors<sp/>reader.<sp/>The<sp/>output<sp/>of<sp/>this<sp/>workflow<sp/>is<sp/>the<sp/>strain<sp/>tensors<sp/>scoped<sp/>only<sp/>on<sp/>the<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>named<sp/>selection.<sp/>Two<sp/>different<sp/>versions<sp/>of<sp/>this<sp/>workflow<sp/>is<sp/>available:<sp/>the<sp/>first<sp/>one<sp/>extracts<sp/>the<sp/>elements<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>of<sp/>the<sp/>named<sp/>selection<sp/>and<sp/>returns<sp/>an<sp/>elemental<sp/>nodal<sp/>field,<sp/>the<sp/>second<sp/>extracts<sp/>the<sp/>nodes<sp/>of<sp/>the<sp/>named<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>selection,<sp/>the<sp/>strain<sp/>reader<sp/>will<sp/>consequently<sp/>average<sp/>the<sp/>tensors<sp/>on<sp/>the<sp/>node<sp/>to<sp/>take<sp/>into<sp/>account<sp/>the<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>nodal<sp/>mesh<sp/>scoping<sp/>in<sp/>input.</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>set<sp/>the<sp/>result<sp/>file<sp/>path<sp/>to<sp/>the<sp/>right<sp/>path</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>std::string<sp/>fileName(</highlight><highlight class="stringliteral">&quot;../../../testfiles/mapdl_files/TwoSolids.rst&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1DataSources" kindref="compound">ansys::dpf::DataSources</ref><sp/>my_data_sources;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>my_data_sources.<ref refid="classansys_1_1dpf_1_1DataSources_1ad2a5bb6f24ca621ffaaee9e7a47cdc20" kindref="member">addResultFile</ref>(fileName);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref><sp/>strain_op(</highlight><highlight class="stringliteral">&quot;EPEL&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>strain_op.connect(<ref refid="namespaceansys_1_1dpf_1aa4a44a04a0aafb8fe0645f019bbd94d1a5b6613f802062fde4faea4b553db7fbc" kindref="member">ansys::dpf::eDataSourcesPin</ref>,<sp/>my_data_sources);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>strain_op.connect(<ref refid="namespaceansys_1_1dpf_1aa4a44a04a0aafb8fe0645f019bbd94d1aa8522e00b69f3a2f2626a088f20823fe" kindref="member">ansys::dpf::eLocationPin</ref>,<sp/><ref refid="structansys_1_1dpf_1_1locations_1aa4e1967b0838d8597200c606c8564d29" kindref="member">ansys::dpf::locations::nodal</ref>);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref><sp/>meshProvider(</highlight><highlight class="stringliteral">&quot;MeshProvider&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>meshProvider.connect(<ref refid="namespaceansys_1_1dpf_1aa4a44a04a0aafb8fe0645f019bbd94d1a5b6613f802062fde4faea4b553db7fbc" kindref="member">ansys::dpf::eDataSourcesPin</ref>,<sp/>my_data_sources);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1MeshedRegion" kindref="compound">ansys::dpf::MeshedRegion</ref><sp/>mesh<sp/>=<sp/>meshProvider.getOutputMeshedRegion(0);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>std::vector&lt;std::string&gt;<sp/>available_named_sel<sp/>=<sp/>mesh.<ref refid="classansys_1_1dpf_1_1MeshedRegion_1a3b768ab61193b7b1a6359f4ac619d1c4" kindref="member">availableNamedSelections</ref>();</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref><sp/>ns_op(</highlight><highlight class="stringliteral">&quot;scoping_provider_by_ns&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ns_op.connect(<ref refid="namespaceansys_1_1dpf_1aa4a44a04a0aafb8fe0645f019bbd94d1a5b6613f802062fde4faea4b553db7fbc" kindref="member">ansys::dpf::eDataSourcesPin</ref>,<sp/>my_data_sources);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ns_op.connect(0,<sp/><ref refid="structansys_1_1dpf_1_1locations_1a3f66169a86ab935fb398b3fdde98bb04" kindref="member">ansys::dpf::locations::elemental</ref>);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ns_op.connect(1,<sp/>available_named_sel[0]);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>strain_op.connect(<ref refid="namespaceansys_1_1dpf_1aa4a44a04a0aafb8fe0645f019bbd94d1a79a70f074b2f79ccaff75ae8e4ec9ec9" kindref="member">ansys::dpf::eMeshScopPin</ref>,<sp/>ns_op,<sp/>0);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1FieldsContainer" kindref="compound">ansys::dpf::FieldsContainer</ref><sp/>my_nodal_strains<sp/>=<sp/>strain_op.getOutputFieldsContainer(0);</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">TEST(WorkflowExample,<sp/>StressTensorsScopedOnOneElementType)</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>workflow<sp/>is<sp/>another<sp/>example<sp/>of<sp/>use<sp/>of<sp/>the<sp/>mesh<sp/>scoping<sp/>in<sp/>input<sp/>of<sp/>a<sp/>result<sp/>reader.<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Here,<sp/>the<sp/>user<sp/>requests<sp/>a<sp/>mesh<sp/>scoping<sp/>including<sp/>all<sp/>the<sp/>elements<sp/>of<sp/>mapdl<sp/>element<sp/>type<sp/>186.<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>mesh<sp/>scoping<sp/>is<sp/>then<sp/>used<sp/>as<sp/>an<sp/>input<sp/>of<sp/>a<sp/>stress<sp/>tensors<sp/>reader.<sp/>The<sp/>output<sp/>of<sp/>this<sp/>workflow<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>is<sp/>the<sp/>stress<sp/>tensors<sp/>on<sp/>all<sp/>the<sp/>elements<sp/>of<sp/>element<sp/>type<sp/>186.</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>set<sp/>the<sp/>result<sp/>file<sp/>path<sp/>to<sp/>the<sp/>right<sp/>path</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>std::string<sp/>fileName(</highlight><highlight class="stringliteral">&quot;../../../testfiles/mapdl_files/TwoSolids.rst&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1DataSources" kindref="compound">ansys::dpf::DataSources</ref><sp/>my_data_sources;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>my_data_sources.<ref refid="classansys_1_1dpf_1_1DataSources_1ad2a5bb6f24ca621ffaaee9e7a47cdc20" kindref="member">addResultFile</ref>(fileName);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref><sp/>stress_op(</highlight><highlight class="stringliteral">&quot;S&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>stress_op.connect(<ref refid="namespaceansys_1_1dpf_1aa4a44a04a0aafb8fe0645f019bbd94d1a5b6613f802062fde4faea4b553db7fbc" kindref="member">ansys::dpf::eDataSourcesPin</ref>,<sp/>my_data_sources);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref><sp/>scop_extract_op(</highlight><highlight class="stringliteral">&quot;scoping_provider_by_prop&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>scop_extract_op.connect(<ref refid="namespaceansys_1_1dpf_1aa4a44a04a0aafb8fe0645f019bbd94d1a5b6613f802062fde4faea4b553db7fbc" kindref="member">ansys::dpf::eDataSourcesPin</ref>,<sp/>my_data_sources);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>scop_extract_op.connect(0,<sp/><ref refid="structansys_1_1dpf_1_1locations_1a3f66169a86ab935fb398b3fdde98bb04" kindref="member">ansys::dpf::locations::elemental</ref>);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>scop_extract_op.connect(1,<sp/>std::string(</highlight><highlight class="stringliteral">&quot;mapdl_element_type&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>scop_extract_op.connect(2,<sp/>186);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>stress_op.connect(<ref refid="namespaceansys_1_1dpf_1aa4a44a04a0aafb8fe0645f019bbd94d1a79a70f074b2f79ccaff75ae8e4ec9ec9" kindref="member">ansys::dpf::eMeshScopPin</ref>,<sp/>scop_extract_op,<sp/>0);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1FieldsContainer" kindref="compound">ansys::dpf::FieldsContainer</ref><sp/>my_elemental_nodal_stress<sp/>=<sp/>stress_op.getOutputFieldsContainer(0);</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">TEST(WorkflowExample,<sp/>HighPassFilteringOnElementalStress)</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>advanced<sp/>workflow<sp/>computes<sp/>the<sp/>normal<sp/>ZZ<sp/>stress<sp/>averaged<sp/>on<sp/>element</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>sand<sp/>apply<sp/>a<sp/>high<sp/>pass<sp/>filter<sp/>keeping<sp/>all<sp/>the<sp/>stress<sp/>values<sp/>higher<sp/>than<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>0.5<sp/>*<sp/>maximum<sp/>stress.</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>example<sp/>requires<sp/>a<sp/>license.<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>set<sp/>the<sp/>result<sp/>file<sp/>path<sp/>to<sp/>the<sp/>right<sp/>path</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>std::string<sp/>fileName(</highlight><highlight class="stringliteral">&quot;../../../testfiles/mapdl_files/TwoSolids.rst&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1DataSources" kindref="compound">ansys::dpf::DataSources</ref><sp/>my_data_sources;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>my_data_sources.<ref refid="classansys_1_1dpf_1_1DataSources_1ad2a5bb6f24ca621ffaaee9e7a47cdc20" kindref="member">addResultFile</ref>(fileName);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref><sp/>s(</highlight><highlight class="stringliteral">&quot;S&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>s.connect(<ref refid="namespaceansys_1_1dpf_1aa4a44a04a0aafb8fe0645f019bbd94d1a5b6613f802062fde4faea4b553db7fbc" kindref="member">ansys::dpf::eDataSourcesPin</ref>,<sp/>my_data_sources);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref><sp/>to_elemental(</highlight><highlight class="stringliteral">&quot;entity_average_fc&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>to_elemental.connect(s);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref><sp/>comp(</highlight><highlight class="stringliteral">&quot;component_selector_fc&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>comp.connect(to_elemental);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>comp.connect(1,<sp/>2);<sp/></highlight><highlight class="comment">//ZZ<sp/>comp<sp/>of<sp/>stress</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref><sp/>min_max(</highlight><highlight class="stringliteral">&quot;min_max_over_label_fc&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>min_max.connect(comp);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>min_max.connect(1,<sp/><ref refid="structansys_1_1dpf_1_1labels_1a22ee1a5e3be8ad98c20c5ca52e247914" kindref="member">ansys::dpf::labels::time</ref>);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref><sp/>scale(</highlight><highlight class="stringliteral">&quot;scale&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>scale.connect(min_max);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>scale.connect(1,<sp/>0.5);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref><sp/>high_pass(</highlight><highlight class="stringliteral">&quot;core::field::high_pass_fc&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>high_pass.connect(comp);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>high_pass.connect(1,<sp/>scale,<sp/>0);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>uncomment<sp/>this<sp/>line<sp/>to<sp/>run<sp/>the<sp/>workflow.</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>this<sp/>requires<sp/>a<sp/>license.</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//ansys::dpf::FieldsContainer<sp/>fields<sp/>=<sp/>high_pass.getOutputFieldsContainer(0);</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">TEST(WorkflowExample,<sp/>StressMultiBodySimulation)</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Stress<sp/>calculation<sp/>on<sp/>a<sp/>multibody<sp/>simulation<sp/>without<sp/>averaging<sp/>across<sp/>bodies</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>workflow<sp/>shows<sp/>the<sp/>computation<sp/>of<sp/>stresses<sp/>in<sp/>a<sp/>multibody<sp/>simulation<sp/>without<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>doing<sp/>averaging<sp/>across<sp/>the<sp/>different<sp/>bodies.</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>set<sp/>the<sp/>result<sp/>file<sp/>path<sp/>to<sp/>the<sp/>right<sp/>path</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>std::string<sp/>fileName(</highlight><highlight class="stringliteral">&quot;../../../testfiles/mapdl_files/TwoSolids.rst&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1DataSources" kindref="compound">ansys::dpf::DataSources</ref><sp/>my_data_sources;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>my_data_sources.<ref refid="classansys_1_1dpf_1_1DataSources_1ad2a5bb6f24ca621ffaaee9e7a47cdc20" kindref="member">addResultFile</ref>(fileName);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref><sp/>tfreq_op(</highlight><highlight class="stringliteral">&quot;time_freq_support_provider&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>tfreq_op.connect(4,<sp/>my_data_sources);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1TimeFreqSupport" kindref="compound">ansys::dpf::TimeFreqSupport</ref><sp/>tfreq_support<sp/>=<sp/>tfreq_op.getOutput&lt;<ref refid="classansys_1_1dpf_1_1TimeFreqSupport" kindref="compound">ansys::dpf::TimeFreqSupport</ref>&gt;(0);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Field" kindref="compound">ansys::dpf::Field</ref><sp/>tfreq<sp/>=<sp/>tfreq_support.<ref refid="classansys_1_1dpf_1_1TimeFreqSupport_1aa0cf046a80d328f966892abe85308f01" kindref="member">frequencies</ref>();</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref><sp/>mesh_op(</highlight><highlight class="stringliteral">&quot;mesh_provider&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>mesh_op.connect(4,<sp/>my_data_sources);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1MeshedRegion" kindref="compound">ansys::dpf::MeshedRegion</ref><sp/>mesh<sp/>=<sp/>mesh_op.getOutput&lt;<ref refid="classansys_1_1dpf_1_1MeshedRegion" kindref="compound">ansys::dpf::MeshedRegion</ref>&gt;(0);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref><sp/>spm_op(</highlight><highlight class="stringliteral">&quot;scoping::by_property&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>spm_op.connect(7,<sp/>mesh);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>spm_op.connect(13,<sp/>std::string(</highlight><highlight class="stringliteral">&quot;mat&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1ScopingsContainer" kindref="compound">ansys::dpf::ScopingsContainer</ref><sp/>mesh_scoping<sp/>=<sp/>spm_op.getOutput&lt;<ref refid="classansys_1_1dpf_1_1ScopingsContainer" kindref="compound">ansys::dpf::ScopingsContainer</ref>&gt;(0);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1Operator" kindref="compound">ansys::dpf::Operator</ref><sp/>stress_op(</highlight><highlight class="stringliteral">&quot;SZ&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>stress_op.connect(0,<sp/>tfreq);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>stress_op.connect(1,<sp/>mesh_scoping);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>stress_op.connect(4,<sp/>my_data_sources);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>stress_op.connect(9,<sp/><ref refid="structansys_1_1dpf_1_1locations_1aa4e1967b0838d8597200c606c8564d29" kindref="member">ansys::dpf::locations::nodal</ref>);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classansys_1_1dpf_1_1FieldsContainer" kindref="compound">ansys::dpf::FieldsContainer</ref><sp/>my_stresses<sp/>=<sp/>stress_op.getOutputFieldsContainer(0);</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
</programlisting> </para>
    </detaileddescription>
    <location file="dpf_api.h"/>
  </compounddef>
</doxygen>
