<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.16.1" xml:lang="en-US">
  <compounddef id="group__group__09" kind="group">
    <compoundname>group_09</compoundname>
    <title>Writing a DPF operator</title>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<sect1 id="group__group__09_1autotoc_md67_1s1"><sect2 id="group__group__09_1autotoc_md67">
<title>Introduction</title><para>The Data Processing Framework (DPF) provides numerical simulation users/engineers with a toolbox for accessing and transforming simulation data. It is used to handle complex pre- or post-processing of simulation data within a simulation workflow.</para>
<para>In DPF, <bold>Operators</bold> are the main object used to create, transform and stream the data. An operator is composed of a “core” that handles the calculation. It receives the data using input pins, applies a transformation and makes the data available through the output pins (think of an integrated circuit in electronics). <bold>There are rules to follow to correctly write operators in a project which is already using DPF.</bold></para>
<para>This section illustrates how to write an operator in a C++ project which is already using DPF capabilities. An operator could also be written in its own plugin.</para>
<para>For a set of instructions on how to create a project from scratch using DPF capabilities to define &amp; expose operators, refer to the <ref refid="group__group__06__2" kindref="compound">Creating a DPF custom operator&apos;s library</ref> section. For a set of instructions on how to integrate DPF capabilities in already existing project, refer to the <ref refid="group__group__06__1" kindref="compound">Using DPF capabilities in an existing project</ref> section.</para>
</sect2></sect1>
<sect1 id="group__group__09_1autotoc_md68_1s1"><sect2 id="group__group__09_1autotoc_md68">
<title>Operator&apos;s implementation example</title><sect3 id="group__group__09_1autotoc_md69">
<title>Custom sort operator</title><para>In this example, an operator for custom sorting is implemented.</para>
<para>Note: the corresponding implementation is only employed as an example. Existing &quot;ascending_sort&quot; or &quot;descending_sort&quot; operators are the best way to sort Field data.</para>
<para>Edit the file where the custom operator is implemented and add the following line if it is not already specified:</para>
<para><programlisting><codeline><highlight class="normal">#include<sp/>&quot;dpf_api.h&quot;</highlight></codeline>
</programlisting></para>
<para>The custom operator implementation can now start.</para>
<para><programlisting><codeline><highlight class="normal">//<sp/>my<sp/>custom<sp/>operator<sp/></highlight></codeline>
<codeline><highlight class="normal">//<sp/>------------------</highlight></codeline>
<codeline><highlight class="normal">struct<sp/>SortOperator</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/>identify<sp/>the<sp/>operator</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>static<sp/>std::string<sp/>name()<sp/>{<sp/>return<sp/>&quot;custom_sort&quot;;<sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/>describe<sp/>the<sp/>operator<sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>static<sp/>ansys::dpf::OperatorSpecification<sp/>specification()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ansys::dpf::OperatorSpecification<sp/>spec;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>spec.setDocumentation(&quot;This<sp/>operator<sp/>allows<sp/>a<sp/>custom<sp/>sort<sp/>of<sp/>the<sp/>input<sp/>field<sp/>data.&quot;);</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>spec.setInputPins(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ansys::dpf::PinDefinition(0)<sp/>//<sp/>set<sp/>the<sp/>input<sp/>pin<sp/>number</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.setName(&quot;field_to_sort&quot;)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.setAcceptedTypes({<sp/>ansys::dpf::types::field})</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.setDoc(&quot;field<sp/>on<sp/>what<sp/>must<sp/>be<sp/>applied<sp/>the<sp/>sorting&quot;),</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>});</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>spec.setOutputPins(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ansys::dpf::PinDefinition(0)<sp/>//<sp/>set<sp/>the<sp/>output<sp/>pin<sp/>number</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.setName(&quot;sorted_field&quot;)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.setAcceptedTypes({<sp/>ansys::dpf::types::field<sp/>})</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.setDoc(&quot;field<sp/>that<sp/>has<sp/>been<sp/>sorted&quot;),</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>});</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>set<sp/>the<sp/>exposed<sp/>properties<sp/>of<sp/>the<sp/>operator,<sp/>allowing<sp/>documentation<sp/>generation<sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>spec.setProperty(ansys::dpf::spec::exposure::sExposure,<sp/>ansys::dpf::spec::exposure::sPublic);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>spec.setProperty(ansys::dpf::spec::category::sCategory,<sp/>&quot;custom&quot;);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>spec.setProperty(ansys::dpf::spec::sUserName,<sp/>&quot;custom<sp/>sort&quot;);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Sets<sp/>the<sp/>operator<sp/>as<sp/>premium</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>spec.setProperty(ansys::dpf::spec::license::sLicense,<sp/>ansys::dpf::spec::license::sDpf);</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>spec;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/>define<sp/>the<sp/>data<sp/>computation</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>static<sp/>void<sp/>run(ansys::dpf::OperatorMain&amp;<sp/>main)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>get<sp/>the<sp/>input<sp/>data</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ansys::dpf::Field<sp/>to_sort<sp/>=<sp/>main.getInputField(0);</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>sort</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::vector&lt;double&gt;<sp/>data;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>to_sort.getData(data);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::sort(data.begin(),<sp/>data.end());</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>set<sp/>the<sp/>output</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ansys::dpf::Field<sp/>sorted<sp/>=<sp/>to_sort.deep_copy();</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sorted.setData(data);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>main.setOutput(0,<sp/>sorted);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>main.setSuccessed();<sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">};</highlight></codeline>
</programlisting></para>
<para>The <bold>SortOperator</bold> structure contains all the implementation related to the custom operator. It contains:<itemizedlist>
<listitem><para>a <bold>name</bold> method (unique identifier): &quot;custom_sort&quot;</para>
</listitem><listitem><para>a <bold>specification</bold> method which defines and describes the operator inputs, outputs and data computation. Here, the operator exposes one input named &quot;field_to_sort&quot; at pin 0: when connecting data to this operator, the connect object should be of <bold>Field</bold> type. It exposes one output named &quot;sorted_field&quot; at pin 0, that is of <bold>Field</bold> type.</para>
</listitem><listitem><para>a <bold>run</bold> method which contains the data computation code. It first reads the input data, reading the <bold>Field</bold> provided through input pin 0. It computes the data, sorting it. Then, it creates the output <bold>Field</bold> and set it as output.</para>
</listitem></itemizedlist>
</para>
<para>In the <bold>specification</bold>, the &quot;license&quot; information is optional. If specified, the operator will require a license checkout using the specified increment while running. It will release the license increment once it has been run. Refer to the <ref refid="group__group__11" kindref="compound">Using DPF Context</ref> section to learn more about licensing in DPF.</para>
</sect3>
<sect3 id="group__group__09_1autotoc_md70">
<title>Record the operator</title><para>The following code enables the operator to be accessible and must be run before any instantiation of this operator.</para>
<para>Working in an operator&apos;s library (see <ref refid="group__group__06__2" kindref="compound">Creating a DPF custom operator&apos;s library</ref>), use the following code:</para>
<para><programlisting><codeline><highlight class="normal">ansys::dpf::core::recordOperatorAtCore&lt;SortOperator&gt;(core_ptr);<sp/></highlight></codeline>
</programlisting></para>
<para>Working in an existing process (see <ref refid="group__group__06__1" kindref="compound">Using DPF capabilities in an existing project</ref>), use the following code:</para>
<para><programlisting><codeline><highlight class="normal">ansys::dpf::core::recordOperator&lt;SortOperator&gt;();<sp/></highlight></codeline>
</programlisting></para>
</sect3>
<sect3 id="group__group__09_1autotoc_md71">
<title>Instantiate the operator</title><para>Once the operator is recorded in the process, it can be instantiated using the following code:</para>
<para><programlisting><codeline><highlight class="normal">ansys::dpf::Operator<sp/>my_custom_operator(&quot;custom_sort&quot;);</highlight></codeline>
</programlisting></para>
<para>The following can be used to check if the operator is correctly instantiated:</para>
<para><programlisting><codeline><highlight class="normal">bool<sp/>bIsInstantiated<sp/>=<sp/>!my_custom_operator.empty();</highlight></codeline>
</programlisting></para>
<para>If bIsInstantiated value is false, either the plugin that contains the operator has not been correctly loaded, or the record is not correctly done. The spelling also must be checked. <linebreak/>
</para>
</sect3>
<sect3 id="group__group__09_1autotoc_md72">
<title>Use the operator to compute data</title><para>The following shows how to create a <bold>Field</bold> containing the data to be sorted:</para>
<para><programlisting><codeline><highlight class="normal">ansys::dpf::FieldDefinition<sp/>fieldDef(ansys::dpf::Location(&quot;CustomLocation&quot;),<sp/>{<sp/>1<sp/>});</highlight></codeline>
<codeline><highlight class="normal">ansys::dpf::Field<sp/>field_to_sort;</highlight></codeline>
<codeline><highlight class="normal">field_to_sort.setFieldDefinition(fieldDef);</highlight></codeline>
<codeline><highlight class="normal">std::vector&lt;double&gt;<sp/>data1({<sp/>2.1,<sp/>1.5,<sp/>4.0<sp/>});</highlight></codeline>
<codeline><highlight class="normal">std::vector&lt;double&gt;<sp/>data2({<sp/>10.9,<sp/>9.5<sp/>});</highlight></codeline>
<codeline><highlight class="normal">field_to_sort.push_back(3,<sp/>data1);</highlight></codeline>
<codeline><highlight class="normal">field_to_sort.push_back(7,<sp/>data2);</highlight></codeline>
</programlisting></para>
<para>Once the operator is instantied and the <bold>Field</bold> containing the data to sort, is create. The operator can then read the input data and perform the necessary computations.</para>
<para><programlisting><codeline><highlight class="normal">my_custom_operator.connect(0,<sp/>field_to_sort);</highlight></codeline>
</programlisting></para>
<para>The output can be requested. It triggers the execution of the operator and provides a <bold>Field</bold> containing sorted data.</para>
<para><programlisting><codeline><highlight class="normal">ansys::dpf::Field<sp/>sorted_vector<sp/>=<sp/>my_custom_operator.getOutputField(0);</highlight></codeline>
<codeline><highlight class="normal">double*<sp/>sorted_data<sp/>=<sp/>sorted_vector.data().data();</highlight></codeline>
</programlisting></para>
<para><computeroutput>sorted_data</computeroutput> should contain the following values with the following order: 1.5, 2.1, 4.0, 9.5, 10.9.</para>
<para>See the <bold>Field</bold> documentation to learn how to access the data.</para>
</sect3>
</sect2></sect1>
<sect1 id="group__group__09_1autotoc_md73_1s1"><sect2 id="group__group__09_1autotoc_md73">
<title>Best practices</title><para><itemizedlist>
<listitem><para>Documentation generation uses JavaScript, <bold>&apos;js&apos; or &apos;JS&apos; chain of characters must be avoided</bold> in any string object of the operator specification. If this rule is not followed, the documentation generation fails.</para>
</listitem><listitem><para>Operator&apos;s name should not contain white space and should be written in snake case.</para>
</listitem><listitem><para>Use lower case in specification&apos;s strings, except for description.</para>
</listitem><listitem><para>Spaces must not be used in specification&apos;s strings, except for description.</para>
</listitem></itemizedlist>
</para>
</sect2></sect1>
<sect1 id="group__group__09_1autotoc_md74_1s1"><sect2 id="group__group__09_1autotoc_md74">
<title>Example full code compiled with Visual Studio on Windows</title><para>The following is the complete code showing how to write an operator in an existing process and use it.</para>
<para><programlisting><codeline><highlight class="normal">//<sp/>DPF<sp/>include<sp/>files<sp/>to<sp/>access<sp/>capabilities<sp/>without<sp/>linking<sp/>step</highlight></codeline>
<codeline><highlight class="normal">#include<sp/>&quot;dpf_api.h&quot;</highlight></codeline>
<codeline><highlight class="normal">#include<sp/>&quot;dpf_api_i.cpp&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">#include<sp/>&lt;iostream&gt;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">//<sp/>initialization<sp/>of<sp/>DPF<sp/>capabilities</highlight></codeline>
<codeline><highlight class="normal">struct<sp/>staticData<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>static<sp/>ansys::dpf::LibraryHandle*<sp/>_dpfLibraryHandle;</highlight></codeline>
<codeline><highlight class="normal">};</highlight></codeline>
<codeline><highlight class="normal">ansys::dpf::LibraryHandle*<sp/>staticData::_dpfLibraryHandle<sp/>=<sp/>new<sp/>ansys::dpf::LibraryHandle(ansys::dpf::Context::premiumContext());</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">//<sp/>my<sp/>custom<sp/>operator<sp/></highlight></codeline>
<codeline><highlight class="normal">//<sp/>------------------</highlight></codeline>
<codeline><highlight class="normal">struct<sp/>SortOperator</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/>identify<sp/>the<sp/>operator</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>static<sp/>std::string<sp/>name()<sp/>{<sp/>return<sp/>&quot;custom_sort&quot;;<sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/>describe<sp/>the<sp/>operator<sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>static<sp/>ansys::dpf::OperatorSpecification<sp/>specification()</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ansys::dpf::OperatorSpecification<sp/>spec;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>spec.setDocumentation(&quot;This<sp/>operator<sp/>allows<sp/>a<sp/>custom<sp/>sort<sp/>of<sp/>the<sp/>input<sp/>field<sp/>data.&quot;);</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>spec.setInputPins(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ansys::dpf::PinDefinition(0)<sp/>//<sp/>set<sp/>the<sp/>input<sp/>pin<sp/>number</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.setName(&quot;field_to_sort&quot;)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.setAcceptedTypes({<sp/>ansys::dpf::types::field})</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.setDoc(&quot;field<sp/>on<sp/>what<sp/>must<sp/>be<sp/>applied<sp/>the<sp/>sorting&quot;),</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>});</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>spec.setOutputPins(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ansys::dpf::PinDefinition(0)<sp/>//<sp/>set<sp/>the<sp/>output<sp/>pin<sp/>number</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.setName(&quot;sorted_field&quot;)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.setAcceptedTypes({<sp/>ansys::dpf::types::field<sp/>})</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.setDoc(&quot;field<sp/>that<sp/>has<sp/>been<sp/>sorted&quot;),</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>});</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>set<sp/>the<sp/>exposed<sp/>properties<sp/>of<sp/>the<sp/>operator,<sp/>allowing<sp/>documentation<sp/>generation<sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>spec.setProperty(ansys::dpf::spec::exposure::sExposure,<sp/>ansys::dpf::spec::exposure::sPublic);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>spec.setProperty(ansys::dpf::spec::category::sCategory,<sp/>&quot;custom&quot;);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>spec.setProperty(ansys::dpf::spec::sUserName,<sp/>&quot;custom<sp/>sort&quot;);</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Sets<sp/>the<sp/>operator<sp/>as<sp/>premium</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>spec.setProperty(ansys::dpf::spec::license::sLicense,<sp/>ansys::dpf::spec::license::sDpf);</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>spec;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/>define<sp/>the<sp/>data<sp/>computation</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>static<sp/>void<sp/>run(ansys::dpf::OperatorMain&amp;<sp/>main)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>get<sp/>the<sp/>input<sp/>data</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ansys::dpf::Field<sp/>to_sort<sp/>=<sp/>main.getInputField(0);</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>sort</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::vector&lt;double&gt;<sp/>data;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>to_sort.getData(data);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::sort(data.begin(),<sp/>data.end());</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>set<sp/>the<sp/>output</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ansys::dpf::Field<sp/>sorted<sp/>=<sp/>to_sort.deep_copy();</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sorted.setData(data);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>main.setOutput(0,<sp/>sorted);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>main.setSuccessed();</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">};</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">int<sp/>main()</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ansys::dpf::core::recordOperator&lt;SortOperator&gt;();<sp/>//<sp/>record<sp/>the<sp/>operator<sp/>to<sp/>make<sp/>it<sp/>accessible</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ansys::dpf::Operator<sp/>my_custom_operator(&quot;custom_sort&quot;);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>bool<sp/>bIsInstantiated<sp/>=<sp/>!my_custom_operator.empty();</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ansys::dpf::FieldDefinition<sp/>fieldDef(ansys::dpf::Location(&quot;CustomLocation&quot;),<sp/>{<sp/>1<sp/>});</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ansys::dpf::Field<sp/>field_to_sort;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>field_to_sort.setFieldDefinition(fieldDef);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>std::vector&lt;double&gt;<sp/>data1({<sp/>2.1,<sp/>1.5,<sp/>4.0<sp/>});</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>std::vector&lt;double&gt;<sp/>data2({<sp/>10.9,<sp/>9.5<sp/>});</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>field_to_sort.push_back(3,<sp/>data1);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>field_to_sort.push_back(7,<sp/>data2);</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>my_custom_operator.connect(0,<sp/>field_to_sort);</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ansys::dpf::Field<sp/>sorted_vector<sp/>=<sp/>my_custom_operator.getOutputField(0);</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>double*<sp/>sorted_data<sp/>=<sp/>sorted_vector.data().data();</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>for<sp/>(int<sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>sorted_vector.dataSize();<sp/>i++)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::cout<sp/>&lt;&lt;<sp/>std::to_string(sorted_data[i]).c_str()<sp/>&lt;&lt;<sp/>std::endl;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::cout<sp/>&lt;&lt;<sp/>&quot;<sp/>&quot;<sp/>&lt;&lt;<sp/>std::endl;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
</programlisting></para>
<para>It can be compiled on Visual Studio using the VCXPROJ file in <ref refid="group__group__06__1" kindref="compound">Using DPF capabilities in an existing project</ref> section. </para>
</sect2></sect1>
    </detaileddescription>
  </compounddef>
</doxygen>
