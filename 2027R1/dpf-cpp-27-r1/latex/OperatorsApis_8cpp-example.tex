\doxysection{Operators\+Apis.\+cpp}
\hypertarget{OperatorsApis_8cpp-example}{}\label{OperatorsApis_8cpp-example}Examples showing how to use the DPF operators to compute the data.


\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{\textcolor{comment}{//}}
\DoxyCodeLine{\textcolor{comment}{//\ COPYRIGHT\ ANSYS.\ ALL\ RIGHTS\ RESERVED.}}
\DoxyCodeLine{\textcolor{comment}{//}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}dpf\_api.h"{}}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ <limits>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#pragma\ warning\ (disable\ :\ 4189)\ }\textcolor{comment}{//local\ variable\ is\ initialized\ but\ not\ referenced}}
\DoxyCodeLine{\textcolor{preprocessor}{\#ifdef\ EXAMPLE}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}Example.h"{}}}
\DoxyCodeLine{\textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ <gtest/gtest.h>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{}
\DoxyCodeLine{TEST(Operator,\ ImportAndReadData)}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Those\ operators\ allow\ to\ read\ data\ from\ solver\ files\ or\ from\ standard\ file\ types.\ }}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Different\ solver\ format\ are\ handled\ by\ DPF\ like\ rst/mode/rfrq/rdsp..\ for\ MAPDL,\ d3plot\ }}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ for\ LsDyna,\ cas.h5/dat.h5/res/flprj\ for\ CFX\ and\ Fluent,\ odb\ for\ Abaqus...\ To\ read\ those,\ }}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ different\ readers\ have\ been\ implemented\ in\ plugins.\ Plugins\ can\ be\ loaded\ on\ demand\ in\ }}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ any\ dpf's\ scripting\ language\ with\ the\ "{}load\ library"{}\ methods.\ File\ readers\ can\ be\ used\ }}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ generically\ thanks\ to\ dpf's\ result\ providers,\ which\ means\ that\ the\ same\ operators\ can\ }}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ be\ used\ for\ any\ file\ types.\ For\ example,\ reading\ a\ displacement\ or\ a\ stress\ for\ any\ files\ }}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ will\ be\ done\ with\ the\ following\ code.}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ set\ the\ result\ file\ path\ to\ the\ right\ path}}
\DoxyCodeLine{\ \ \ \ std::string\ fileName(\textcolor{stringliteral}{"{}../../../testfiles/mapdl\_files/TwoSolids.rst"{}});}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1DataSources}{ansys::dpf::DataSources}}\ my\_data\_sources;}
\DoxyCodeLine{\ \ \ \ my\_data\_sources.\doxymbox{\hyperlink{classansys_1_1dpf_1_1DataSources_ad2a5bb6f24ca621ffaaee9e7a47cdc20}{addResultFile}}(fileName);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//displacement\ for\ any\ solver\ file}}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1Operator}{ansys::dpf::Operator}}\ u\_op(\textcolor{stringliteral}{"{}U"{}});}
\DoxyCodeLine{\ \ \ \ u\_op.connect(\doxymbox{\hyperlink{namespaceansys_1_1dpf_aa4a44a04a0aafb8fe0645f019bbd94d1a5b6613f802062fde4faea4b553db7fbc}{ansys::dpf::eDataSourcesPin}},\ my\_data\_sources);}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1FieldsContainer}{ansys::dpf::FieldsContainer}}\ my\_u\ =\ u\_op.\doxymbox{\hyperlink{classansys_1_1dpf_1_1Operator_a9994ffe0f23c4a5de614099abb95286c}{getOutputFieldsContainer}}(0);}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//stress\ for\ any\ solver\ file}}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1Operator}{ansys::dpf::Operator}}\ s\_op(\textcolor{stringliteral}{"{}S"{}});}
\DoxyCodeLine{\ \ \ \ s\_op.connect(\doxymbox{\hyperlink{namespaceansys_1_1dpf_aa4a44a04a0aafb8fe0645f019bbd94d1a5b6613f802062fde4faea4b553db7fbc}{ansys::dpf::eDataSourcesPin}},\ my\_data\_sources);}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1FieldsContainer}{ansys::dpf::FieldsContainer}}\ my\_s\ =\ s\_op.\doxymbox{\hyperlink{classansys_1_1dpf_1_1Operator_a9994ffe0f23c4a5de614099abb95286c}{getOutputFieldsContainer}}(0);}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{TEST(Operator,\ ImportAndReadDataCustom)}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Result\ providers\ can\ be\ customized\ to\ read\ a\ specific\ time\ frequency\ or\ to\ provide\ }}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ results\ on\ a\ subset\ of\ the\ mesh.}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ set\ the\ result\ file\ path\ to\ the\ right\ path}}
\DoxyCodeLine{\ \ \ \ std::string\ fileName(\textcolor{stringliteral}{"{}../../../testfiles/mapdl\_files/TwoSolids.rst"{}});}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1DataSources}{ansys::dpf::DataSources}}\ my\_data\_sources;}
\DoxyCodeLine{\ \ \ \ my\_data\_sources.\doxymbox{\hyperlink{classansys_1_1dpf_1_1DataSources_ad2a5bb6f24ca621ffaaee9e7a47cdc20}{addResultFile}}(fileName);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//displacement\ for\ any\ solver\ file}}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1Operator}{ansys::dpf::Operator}}\ u\_op(\textcolor{stringliteral}{"{}U"{}});}
\DoxyCodeLine{\ \ \ \ u\_op.connect(\doxymbox{\hyperlink{namespaceansys_1_1dpf_aa4a44a04a0aafb8fe0645f019bbd94d1a5b6613f802062fde4faea4b553db7fbc}{ansys::dpf::eDataSourcesPin}},\ my\_data\_sources);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Different\ ways\ to\ set\ the\ time\ scoping}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Select\ one\ time/frequency}}
\DoxyCodeLine{\ \ \ \ u\_op.connect(\doxymbox{\hyperlink{namespaceansys_1_1dpf_aa4a44a04a0aafb8fe0645f019bbd94d1ac390a52dd8c4f1e8ff81a162cdc04d4f}{ansys::dpf::eTimeScopPin}},\ 2);\ \textcolor{comment}{//\ Int\ :\ Select\ second\ time/freq\ set\ in\ the\ time\ freq\ support}}
\DoxyCodeLine{\ \ \ \ u\_op.connect(\doxymbox{\hyperlink{namespaceansys_1_1dpf_aa4a44a04a0aafb8fe0645f019bbd94d1ac390a52dd8c4f1e8ff81a162cdc04d4f}{ansys::dpf::eTimeScopPin}},\ 0.002);\ \textcolor{comment}{//\ Double\ :\ Gives\ a\ field\ interpolated\ at\ the\ given\ time/freq\ value}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Select\ multiple\ times/frequencies\ }}
\DoxyCodeLine{\ \ \ \ std::vector<int>\ time\_sets\ =\ \{\ 1,2,3\ \};}
\DoxyCodeLine{\ \ \ \ u\_op.connect(\doxymbox{\hyperlink{namespaceansys_1_1dpf_aa4a44a04a0aafb8fe0645f019bbd94d1ac390a52dd8c4f1e8ff81a162cdc04d4f}{ansys::dpf::eTimeScopPin}},\ time\_sets);\ \textcolor{comment}{//\ Vec\ Int:\ Select\ time/freq\ sets\ in\ the\ time\ freq\ support}}
\DoxyCodeLine{\ \ \ \ std::vector<double>\ times\ =\ \{\ 0.002,\ 0.003\ \};}
\DoxyCodeLine{\ \ \ \ u\_op.connect(\doxymbox{\hyperlink{namespaceansys_1_1dpf_aa4a44a04a0aafb8fe0645f019bbd94d1ac390a52dd8c4f1e8ff81a162cdc04d4f}{ansys::dpf::eTimeScopPin}},\ times);\ \textcolor{comment}{//\ Vec\ Double\ :\ Gives\ fields\ interpolated\ at\ the\ given\ time/freq\ values}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Select\ all\ the\ time/frequencies\ of\ a\ load\ step}}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1Scoping}{ansys::dpf::Scoping}}\ load\_step(\{\ 2\ \},\ \doxymbox{\hyperlink{structansys_1_1dpf_1_1locations_abc48364ef6b184ddf696099c9a2993cd}{ansys::dpf::locations::time\_step}});}
\DoxyCodeLine{\ \ \ \ u\_op.connect(\doxymbox{\hyperlink{namespaceansys_1_1dpf_aa4a44a04a0aafb8fe0645f019bbd94d1ac390a52dd8c4f1e8ff81a162cdc04d4f}{ansys::dpf::eTimeScopPin}},\ load\_step);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1Scoping}{ansys::dpf::Scoping}}\ node\_scoping(\{\ 1,2,3\ \},\ \doxymbox{\hyperlink{structansys_1_1dpf_1_1locations_aa4e1967b0838d8597200c606c8564d29}{ansys::dpf::locations::nodal}});}
\DoxyCodeLine{\ \ \ \ u\_op.connect(\doxymbox{\hyperlink{namespaceansys_1_1dpf_aa4a44a04a0aafb8fe0645f019bbd94d1a79a70f074b2f79ccaff75ae8e4ec9ec9}{ansys::dpf::eMeshScopPin}},\ node\_scoping);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1Scoping}{ansys::dpf::Scoping}}\ element\_scoping(\{\ 1,2,3\ \},\ \doxymbox{\hyperlink{structansys_1_1dpf_1_1locations_a3f66169a86ab935fb398b3fdde98bb04}{ansys::dpf::locations::elemental}});}
\DoxyCodeLine{\ \ \ \ u\_op.connect(\doxymbox{\hyperlink{namespaceansys_1_1dpf_aa4a44a04a0aafb8fe0645f019bbd94d1a79a70f074b2f79ccaff75ae8e4ec9ec9}{ansys::dpf::eMeshScopPin}},\ element\_scoping);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ uncomment\ this\ line\ to\ compute\ the\ fields\ container.}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ this\ requires\ a\ license.}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ ansys::dpf::FieldsContainer\ my\_u\ =\ u\_op.getOutputFieldsContainer(0);;}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{TEST(Operator,\ ReadExportedData)}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Standards\ file\ formats\ reader\ are\ also\ supported\ to\ import\ custom\ data.\ }}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Fields\ can\ be\ imported\ from\ csv,\ vtk\ or\ hdf5\ files}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ std::string\ my\_path\ =\ \textcolor{stringliteral}{"{}c:/temp/file.csv"{}};}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1DataSources}{ansys::dpf::DataSources}}\ my\_data\_sources;}
\DoxyCodeLine{\ \ \ \ my\_data\_sources.\doxymbox{\hyperlink{classansys_1_1dpf_1_1DataSources_ad2a5bb6f24ca621ffaaee9e7a47cdc20}{addResultFile}}(my\_path);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1Operator}{ansys::dpf::Operator}}\ csv(\textcolor{stringliteral}{"{}csv\_to\_field"{}});}
\DoxyCodeLine{\ \ \ \ csv.connect(\doxymbox{\hyperlink{namespaceansys_1_1dpf_aa4a44a04a0aafb8fe0645f019bbd94d1a5b6613f802062fde4faea4b553db7fbc}{ansys::dpf::eDataSourcesPin}},\ my\_data\_sources);}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ uncomment\ this\ line\ to\ compute\ the\ fields\ container.}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ this\ requires\ a\ license.}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ ansys::dpf::FieldsContainer\ my\_fields\ =\ csv.getOutputFieldsContainer(0);}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{TEST(Operator,\ TransformingExistingData)}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ The\ field\ being\ the\ main\ data\ container\ in\ DPF,\ most\ of\ the\ operator\ transforming\ the\ data\ }}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ take\ a\ field\ or\ fields\ container\ as\ input\ and\ return\ a\ transformed\ field\ or\ fields\ container\ }}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ in\ output.\ Analytic,\ averaging\ or\ filtering\ operations\ can\ be\ performed\ on\ the\ simulation\ data}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1Field}{ansys::dpf::Field}}\ field1(3,\ \{\ 3\ \},\ \doxymbox{\hyperlink{structansys_1_1dpf_1_1locations_aa4e1967b0838d8597200c606c8564d29}{ansys::dpf::locations::nodal}});}
\DoxyCodeLine{\ \ \ \ field1.\doxymbox{\hyperlink{classansys_1_1dpf_1_1Field_a9f7828d92496843cc5f15ee9e32f6c4a}{setData}}(\{\ 1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0\ \});}
\DoxyCodeLine{\ \ \ \ field1.scoping().setIds(\{\ 1,2,3\ \});}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ using\ analytic\ operator:\ scale\ operator}}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1Operator}{ansys::dpf::Operator}}\ op1(\textcolor{stringliteral}{"{}scale"{}});}
\DoxyCodeLine{\ \ \ \ op1.connect(0,\ field1);}
\DoxyCodeLine{\ \ \ \ op1.connect(1,\ 2.0);}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1Field}{ansys::dpf::Field}}\ out\ =\ op1.getOutputField(0);}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{int}\ size\ =\ 0;}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{namespaceansys_1_1dpf_acb480013bfed185b5e34a0bdcb0e3790}{ansys::dpf::dp\_double}}*\ \textcolor{keyword}{const}\ data\ =\ out.\doxymbox{\hyperlink{classansys_1_1dpf_1_1Field_a0967a8c6cee105a679dd1151a5d41004}{data}}(size);}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ returns:}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ \{\ 2.,\ \ 4.,\ \ 6.,\ 8.,\ 10.,\ 12.,\ 14.,\ 16.,\ 18.\}}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{TEST(Operator,\ ExportingData)}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ After\ transforming\ or\ reading\ simulation\ data\ with\ DPF,\ the\ user\ might\ want\ to\ export\ the\ }}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ results\ in\ a\ given\ format\ to\ use\ it\ in\ another\ environment\ or\ to\ save\ it\ for\ future\ use\ with\ }}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ dpf.\ Vtk,\ h5,\ csv\ and\ txt\ (serializer\ operator)\ are\ examples\ of\ supported\ exports.\ Export\ }}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ operators\ often\ match\ with\ import\ operators\ allowing\ user\ to\ reuse\ their\ data.\ The\ }}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ "{}serialization"{}\ operators\ menu\ lists\ the\ available\ import/export\ operators.}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ set\ the\ result\ file\ path\ to\ the\ right\ path}}
\DoxyCodeLine{\ \ \ \ std::string\ fileName(\textcolor{stringliteral}{"{}../../../testfiles/mapdl\_files/TwoSolids.rst"{}});}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1DataSources}{ansys::dpf::DataSources}}\ my\_data\_sources;}
\DoxyCodeLine{\ \ \ \ my\_data\_sources.\doxymbox{\hyperlink{classansys_1_1dpf_1_1DataSources_ad2a5bb6f24ca621ffaaee9e7a47cdc20}{addResultFile}}(fileName);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//displacement\ for\ any\ solver\ file}}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1Operator}{ansys::dpf::Operator}}\ u\_op(\textcolor{stringliteral}{"{}U"{}});}
\DoxyCodeLine{\ \ \ \ u\_op.connect(\doxymbox{\hyperlink{namespaceansys_1_1dpf_aa4a44a04a0aafb8fe0645f019bbd94d1a5b6613f802062fde4faea4b553db7fbc}{ansys::dpf::eDataSourcesPin}},\ my\_data\_sources);}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1FieldsContainer}{ansys::dpf::FieldsContainer}}\ my\_fields\ =\ u\_op.getOutputFieldsContainer(0);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//scale\ it\ by\ 2.0}}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1Operator}{ansys::dpf::Operator}}\ my\_scale\_op(\textcolor{stringliteral}{"{}scale\_fc"{}});}
\DoxyCodeLine{\ \ \ \ my\_scale\_op.connect(0,\ my\_fields);}
\DoxyCodeLine{\ \ \ \ my\_scale\_op.connect(1,\ 2.0);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//get\ the\ mesh}}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1Operator}{ansys::dpf::Operator}}\ my\_mesh\_op(\textcolor{stringliteral}{"{}MeshProvider"{}});}
\DoxyCodeLine{\ \ \ \ my\_mesh\_op.connect(\doxymbox{\hyperlink{namespaceansys_1_1dpf_aa4a44a04a0aafb8fe0645f019bbd94d1a5b6613f802062fde4faea4b553db7fbc}{ansys::dpf::eDataSourcesPin}},\ my\_data\_sources);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ export\ the\ result\ in\ vtk}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ uncomment\ the\ following\ code\ to\ enable\ the\ export\ operations}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ this\ requires\ a\ license.}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//ansys::dpf::Operator\ my\_export("{}vtk\_export"{});}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//my\_export.connect(0,\ std::string("{}C:/temp/fileNew.vtk"{}));}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//my\_export.connect(1,\ my\_mesh\_op,\ 0);}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//my\_export.connect(2,\ my\_scale\_op,\ 0);}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ my\_export.run();}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{TEST(Operator,\ ChainingOperators)}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ To\ create\ more\ complex\ operations\ and\ customizable\ results,\ operators\ can\ be\ }}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ chained\ together\ to\ create\ workflows.\ This\ way\ a\ result\ can\ be\ read\ from\ a\ solver\ }}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ result\ file\ and\ directly\ transformed\ in\ a\ single\ workflow.\ Examples\ can\ be\ found\ }}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ in\ APIs/Workflow\ examples\ menu.\ 2\ syntaxes\ can\ be\ used\ to\ create\ and\ connect\ }}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ operators\ together.}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ set\ the\ result\ file\ path\ to\ the\ right\ path}}
\DoxyCodeLine{\ \ \ \ std::string\ fileName(\textcolor{stringliteral}{"{}../../../testfiles/mapdl\_files/TwoSolids.rst"{}});}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1DataSources}{ansys::dpf::DataSources}}\ my\_data\_sources;}
\DoxyCodeLine{\ \ \ \ my\_data\_sources.\doxymbox{\hyperlink{classansys_1_1dpf_1_1DataSources_ad2a5bb6f24ca621ffaaee9e7a47cdc20}{addResultFile}}(fileName);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1Operator}{ansys::dpf::Operator}}\ u\_op(\textcolor{stringliteral}{"{}U"{}});}
\DoxyCodeLine{\ \ \ \ u\_op.connect(\doxymbox{\hyperlink{namespaceansys_1_1dpf_aa4a44a04a0aafb8fe0645f019bbd94d1a5b6613f802062fde4faea4b553db7fbc}{ansys::dpf::eDataSourcesPin}},\ my\_data\_sources);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1Operator}{ansys::dpf::Operator}}\ norm\_op(\textcolor{stringliteral}{"{}norm\_fc"{}});}
\DoxyCodeLine{\ \ \ \ norm\_op.connect(0,\ u\_op,\ 0);\ \textcolor{comment}{//connect\ norm\_op\ input\ pin\ 0\ to\ u\_op\ output\ pin\ 0}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1FieldsContainer}{ansys::dpf::FieldsContainer}}\ my\_u\_norm\ =\ norm\_op.getOutputFieldsContainer(0);}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{TEST(Operator,\ UsingConfigurations)}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Advanced\ user\ might\ want\ to\ configurate\ an\ operator's\ behavior\ during\ its\ running\ phase.\ }}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ This\ can\ be\ done\ through\ the\ "{}config"{}.\ This\ option\ allows\ to\ choose\ if\ an\ operator\ can\ }}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ directly\ modify\ the\ input\ data\ container\ instead\ of\ creating\ a\ new\ one\ with\ the\ "{}inplace"{}\ }}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ configuration,\ to\ choose\ if\ an\ operation\ between\ to\ fields\ should\ use\ their\ indices\ or\ mesh\ }}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ ids\ with\ the\ "{}work\_by\_index"{}\ configuration...\ Each\ operator's\ description\ explains\ which\ }}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ configuration\ are\ supported.}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1Field}{ansys::dpf::Field}}\ field1(3,\ \{\ 3\ \},\ \doxymbox{\hyperlink{structansys_1_1dpf_1_1locations_aa4e1967b0838d8597200c606c8564d29}{ansys::dpf::locations::nodal}});}
\DoxyCodeLine{\ \ \ \ field1.\doxymbox{\hyperlink{classansys_1_1dpf_1_1Field_a9f7828d92496843cc5f15ee9e32f6c4a}{setData}}(\{\ 1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0\ \});}
\DoxyCodeLine{\ \ \ \ field1.scoping().setIds(\{\ 1,2,3\ \});}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1Field}{ansys::dpf::Field}}\ field2(3,\ \{\ 3\ \},\ \doxymbox{\hyperlink{structansys_1_1dpf_1_1locations_aa4e1967b0838d8597200c606c8564d29}{ansys::dpf::locations::nodal}});}
\DoxyCodeLine{\ \ \ \ field2.\doxymbox{\hyperlink{classansys_1_1dpf_1_1Field_a9f7828d92496843cc5f15ee9e32f6c4a}{setData}}(\{\ 1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0\ \});}
\DoxyCodeLine{\ \ \ \ field2.scoping().setIds(\{\ 3,4,5\ \});}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1OperatorConfig}{ansys::dpf::OperatorConfig}}\ config\ =\ \doxymbox{\hyperlink{classansys_1_1dpf_1_1core_a20f37512490ec6131335f52be7f2f28d}{ansys::dpf::core::defaultOperatorConfig}}(\textcolor{stringliteral}{"{}add"{}});}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{bool}\ current\_value\ =\ config.\doxymbox{\hyperlink{classansys_1_1dpf_1_1OperatorConfig_a3948249196192234ee24269ba8e994b7}{getBoolValue}}(\textcolor{stringliteral}{"{}work\_by\_index"{}});\textcolor{comment}{//returns\ current\ values\ of\ configuration}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//modify\ work\_by\_index\ config\ (default\ is\ false)}}
\DoxyCodeLine{\ \ \ \ config.\doxymbox{\hyperlink{classansys_1_1dpf_1_1OperatorConfig_a13fa51659fa378a6f67b344bbb9ea1be}{set}}(\textcolor{stringliteral}{"{}work\_by\_index"{}},\ \textcolor{keyword}{true});}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//instantiate\ the\ operator\ with\ the\ config}}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1Operator}{ansys::dpf::Operator}}\ op1(\textcolor{stringliteral}{"{}add"{}},\ config);}
\DoxyCodeLine{\ \ \ \ op1.connect(0,\ field1);}
\DoxyCodeLine{\ \ \ \ op1.connect(1,\ field2);}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{classansys_1_1dpf_1_1Field}{ansys::dpf::Field}}\ out\ =\ op1.getOutputField(0);}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{int}\ size\ =\ 0;}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{namespaceansys_1_1dpf_acb480013bfed185b5e34a0bdcb0e3790}{ansys::dpf::dp\_double}}*\ \textcolor{keyword}{const}\ data\ =\ out.\doxymbox{\hyperlink{classansys_1_1dpf_1_1Field_a0967a8c6cee105a679dd1151a5d41004}{data}}(size);}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ returns:}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ \{\ 2.,\ \ 4.,\ \ 6.,\ 8.,\ 10.,\ 12.,\ 14.,\ 16.,\ 18.\}}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//use\ default\ config\ value}}
\DoxyCodeLine{\ \ \ \ config.\doxymbox{\hyperlink{classansys_1_1dpf_1_1OperatorConfig_a13fa51659fa378a6f67b344bbb9ea1be}{set}}(\textcolor{stringliteral}{"{}work\_by\_index"{}},\ \textcolor{keyword}{false});}
\DoxyCodeLine{\ \ \ \ op1\ =\ \doxymbox{\hyperlink{classansys_1_1dpf_1_1Operator}{ansys::dpf::Operator}}(\textcolor{stringliteral}{"{}add"{}},\ config);}
\DoxyCodeLine{\ \ \ \ op1.connect(0,\ field1);}
\DoxyCodeLine{\ \ \ \ op1.connect(1,\ field2);}
\DoxyCodeLine{\ \ \ \ out\ =\ op1.getOutputField(0);}
\DoxyCodeLine{\ \ \ \ \doxymbox{\hyperlink{namespaceansys_1_1dpf_acb480013bfed185b5e34a0bdcb0e3790}{ansys::dpf::dp\_double}}*\ \textcolor{keyword}{const}\ data2\ =\ out.\doxymbox{\hyperlink{classansys_1_1dpf_1_1Field_a0967a8c6cee105a679dd1151a5d41004}{data}}(size);}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ returns:}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ \{\ 1.,\ \ 2.,\ \ 3.,\ 4.,\ \ 5.,\ \ 6.,\ 8.,\ 10.,\ 12.,\ 4.,\ \ 5.,\ \ 6.,\ 7.,\ \ 8.,\ \ 9.\}}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ changing\ the\ "{}permissive"{}\ config\ could\ allow\ to\ add\ fields\ of\ different\ homogeneities}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ changing\ the\ "{}binary\_operation"{}\ config\ could\ allow\ to\ keep\ only\ the\ intersection\ between\ fields\ ids\ and\ not\ the\ union}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//...}}
\DoxyCodeLine{\}}

\end{DoxyCodeInclude}
 